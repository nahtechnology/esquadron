<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/template/administracion/dashboard.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:pa="http://xmlns.jcp.org/jsf/composite/paginacion">
    <ui:define name="menu"></ui:define>
    <ui:define name="contenido">
        <f:metadata>
            <f:viewParam name="grupo" value="#{heredarAlumnoControlador.grupo}"/>
            <f:viewParam name="escuela" value="#{heredarAlumnoControlador.escuela}"/>
            <f:viewAction action="#{heredarAlumnoControlador.inicio}"/>
        </f:metadata>
        <strong>Selecciona los alumnos que desee heredar al grupo: ${param['grupo-nombre']}</strong>
        <div uk-grid="">
            <div class="uk-width-1-3">
                <h:outputText value="Este Grupo aun no tiene relacionado un ciclo escolar" rendered="#{empty heredarAlumnoControlador.cicloEscolarModeloLista}"/>
                <h:form id="formulario-ciclo-escoalr" rendered="#{not empty heredarAlumnoControlador.cicloEscolarModeloLista}">
                    <div class="uk-margin">
                        <h:outputLabel value="ciclo escolar" styleClass="uk-form-label primera-mayuk-text-capitalize" rendered="#{not empty heredarAlumnoControlador.cicloEscolarModeloLista}"/>
                        <div class="uk-form-controls">
                            <h:selectOneMenu id="seleccion-ciclo-escolar" styleClass="uk-select" value="#{heredarAlumnoControlador.idCicloEscolar}" rendered="#{not empty heredarAlumnoControlador.cicloEscolarModeloLista}">
                                <f:selectItem itemLabel="${otrosetiqueta['select']}" noSelectionOption="true" itemValue="#{null}"/>
                                <f:selectItems value="#{heredarAlumnoControlador.cicloEscolarModeloLista}"
                                               var="cicloEscolarModelo"
                                               itemLabel="${cicloEscolarModelo.descripcion}"
                                               itemValue="${cicloEscolarModelo.hashCode()}"/>
                                <f:validateRequired/>
                            </h:selectOneMenu>
                        </div>
                        <h:message for="seleccion-ciclo-escolar" styleClass="uk-text-danger uk-display-block primera-mayuscula"/>
                    </div>
                    <h:outputText value="Esta escuela al precer no tiene profesores asignado" rendered="#{empty heredarAlumnoControlador.profesorModeloLista}"/>
                    <div class="uk-margin">
                        <h:outputLabel value="profesor" for="seleccion-profesor" styleClass="uk-form-label uk-text-capitalize" rendered="#{not empty heredarAlumnoControlador.profesorModeloLista}"/>
                        <div class="uk-form-controls">
                            <h:selectOneMenu id="seleccion-profesor" value="#{heredarAlumnoControlador.idProfeosor}" styleClass="uk-select" rendered="#{not empty heredarAlumnoControlador.profesorModeloLista}">
                                <f:selectItem itemLabel="${otrosetiqueta['select']}" noSelectionOption="true" itemValue="#{null}"/>
                                <f:selectItems value="#{heredarAlumnoControlador.profesorModeloLista}"
                                               var="profesorModelo"
                                               itemLabel="${profesorModelo.nombre} ${profesorModelo.apellidoPaterno} ${profesorModelo.apellidoMaterno}"
                                               itemValue="${profesorModelo.id}"/>
                                <f:validateRequired/>
                            </h:selectOneMenu>
                        </div>
                        <h:message for="seleccion-profesor" styleClass="uk-text-danger uk-display-block primera-mayuscula"/>
                    </div>
                    <div class="uk-margin uk-flex uk-flex-right">
                        <h:commandButton value="Buscar" styleClass="uk-button uk-button-primary">
                            <f:ajax execute="seleccion-ciclo-escolar seleccion-profesor"
                                    listener="#{heredarAlumnoControlador.buscaGrupo()}"
                                    render="@form formulario-grupo:seleccion-grupo"
                                    onevent="function funcion(data) { if (data.status === 'success') limpiaSeleccion(); }"/>
                        </h:commandButton>
                    </div>
                </h:form>
                <h:form id="formulario-grupo">
                    <div class="uk-margin">
                        <h:outputLabel value="grupo" for="seleccion-grupo" styleClass="uk-form-label uk-text-capitalize"/>
                        <div class="uk-form-controls">
                            <h:selectOneMenu id="seleccion-grupo" value="#{heredarAlumnoControlador.idGrupo}" styleClass="uk-select">
                                <f:selectItem itemLabel="${otrosetiqueta['select']}" noSelectionOption="true" itemValue="#{null}"/>
                                <f:selectItems value="#{heredarAlumnoControlador.grupoModeloLista}"
                                               var="grupoModelo"
                                               itemLabel="${grupoModelo.grado} ${grupoModelo.grupo}"
                                               itemValue="${grupoModelo.id}"/>
                                <f:validateRequired/>
                            </h:selectOneMenu>
                        </div>
                        <h:message id="mensaje-seleccion-grupo" for="seleccion-grupo" styleClass="uk-text-danger uk-display-block primera-mayuscula"/>
                        <div class="uk-margin uk-flex uk-flex-right">
                            <h:commandButton value="buscar" styleClass="uk-button uk-button-primary">
                                <f:ajax execute="seleccion-grupo"
                                        render="@form formulario-alumnos"
                                        listener="#{heredarAlumnoControlador.buscaAlumnosGrupo}"
                                        onevent="function funcion(data){ if (data.status === 'success') limpiaSeleccion();}"/>
                            </h:commandButton>
                        </div>
                    </div>
                </h:form>
            </div>
            <div class="uk-width-2-3">
                <div class="uk-card uk-card-default uk-card-small uk-card-hover tabla">
                    <h:form id="formulario-alumnos">
                        <div class="uk-card-header uk-flex uk-flex-middle">
                            <span class="uk-display-inline-block uk-margin-small-right">Selecionar todos:</span>
                            <label class="switch">
                                <input type="checkbox" class="uk-checkbox"/>
                                <span class="slider round"/>
                            </label>
                        </div>
                        <div class="uk-card-body">
                            <ui:fragment rendered="#{empty heredarAlumnoControlador.alumnoModeloLista}">
                                <table class="uk-table uk-table-hover uk-table-divider uk-table-middle">
                                    <thead class="uk-background-primary">
                                    <tr>
                                        <th class="letra-titulo">Nombre</th>
                                        <th class="letra-titulo">Apellido Paterno</th>
                                        <th class="letra-titulo">Apellido Materno</th>
                                        <th class="letra-titulo">Seleccionar</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td colspan="4">
                                            <div class="uk-flex uk-flex-center">
                                                <h:graphicImage library="img" name="vacio.svg" height="215" width="243" alt="vacio"/>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </ui:fragment>
                            <h:selectManyCheckbox value="${heredarAlumnoControlador.alumnosSeleccionLista}" rendered="#{not empty heredarAlumnoControlador.alumnoModeloLista}">
                                <f:selectItems value="#{heredarAlumnoControlador.alumnoModeloLista}"
                                               var="alumnoModelo"
                                               itemLabel="${alumnoModelo.nombre} ${alumnoModelo.apellidoPaterno} ${alumnoModelo.apellidoMaterno} - ${alumnoModelo.apodo}"
                                               itemValue="${alumnoModelo.id}"/>
                            </h:selectManyCheckbox>
                        </div>
                        <div class="uk-card-footer uk-flex uk-flex-right">
                            <h:commandButton value="heredar"
                                             styleClass="uk-button uk-button-primary"
                                             disabled="${empty heredarAlumnoControlador.alumnoModeloLista}"
                                             action="#{heredarAlumnoControlador.hereda}"/>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>
    </ui:define>
    <ui:define name="file-js">
        <h:outputScript library="js" name="/administracion/heredar-alumno.js"/>
    </ui:define>
</ui:composition>
