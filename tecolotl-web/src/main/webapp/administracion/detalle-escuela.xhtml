<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:pa="http://xmlns.jcp.org/jsf/composite/paginacion">
<ui:composition template="/template/administracion/dashboard.xhtml">
    <f:metadata>
        <f:viewParam name="escuela" value="#{detalleEscuelaControlador.escuela}"/>
        <f:viewAction action="#{detalleEscuelaControlador.iniicio}"/>
    </f:metadata>
    <ui:define name="menu">
        <ul class="uk-nav uk-nav-default uk-nav-parent-icon" uk-nav="">
            <li class="uk-nav-header">#{etiqueta['menu']}</li>
            <li class="uk-parent uk-open">
                <a><h:graphicImage library="img" name="icono/escuela.svg" styleClass="uk-icon uk-icon-image uk-margin-small-right" pt:uk-svg=""/><span class="uk-text-capitalize">#{administracion['menu.schools']}</span></a>
                <ul class="uk-nav-sub">
                    <li class="uk-active"><h:link outcome="dashboard"><h:outputText pt:uk-icon="home" styleClass="uk-margin-small-right"/><span class="uk-text-capitalize">#{administracion['menu.dashboard']}</span></h:link></li>
                </ul>
            </li>
        </ul>
    </ui:define>
    <ui:define name="contenido">
        <h:outputStylesheet library="css" name="tablas.css"/>
        <h:outputStylesheet library="css" name="letra.css"/>
        <h:outputStylesheet library="css" name="administracion/scroll-esquadron.css"/>
        <h:outputStylesheet library="css" name="administracion/dashboard.css"/>
        <h:outputStylesheet library="css" name="/administracion/date-picker.css"/>
        <div class="uk-card uk-card-default uk-card-small uk-card-hover">
            <div class="uk-card-header">
                <div class="uk-grid uk-grid-small">
                    <div class="uk-width-auto"><h4><h:outputText styleClass="uk-text-middle uk-text-capitalize" value="#{administracion['schooldetail.title']}"/></h4></div>
                </div>
            </div>
            <div class="uk-card-body">
                <h:form styleClass="uk-form-stacked" >
                    <h:panelGroup styleClass="uk-grid"  pt:uk-grid="" >
                        <div class="uk-width-1-5@m uk-width-1-1@s ">
                            <h:outputLabel styleClass="uk-form-label uk-text-uppercase" value="#{administracion['dashboard.modal.cct']}" for="cctv" />
                            <div class="uk-form-controls">
                                <h:inputText id="cctv"  pt:placeholder="21DBA0004C" disabled="true"  styleClass="uk-input" value="#{detalleEscuelaControlador.escuelaDetalleModelo.claveCentroTrabajo}"/>
                            </div>
                        </div>
                        <div class="uk-width-3-5@m uk-width-1-1@s" >
                            <h:outputLabel styleClass="uk-form-label uk-text-capitalize" for="nombre-escuela" value="#{administracion['dashboard.modal.name']}" />
                            <div class="uk-form-controls">
                                <h:inputText id="nombre-escuela" pt:placeholder="Francisco I Madero " disabled="true" styleClass="uk-input" value="#{detalleEscuelaControlador.escuelaDetalleModelo.nombre}"/>
                            </div>
                        </div>
                        <div class="uk-width-1-5@m uk-width-1-1@s">
                            <h:outputLabel styleClass="uk-form-label uk-text-capitalize" for="estado-bloqueo" value="#{administracion['catalogoadministrativo.administrator.bloc.catalog']}"/>
                            <div class="uk-form-controls">
                                <h:inputText id="estado-bloqueo" pt:placeholder="Activo" disabled="true" styleClass="uk-input" value="#{detalleEscuelaControlador.escuelaDetalleModelo.motivoBloqueoModelo.valor}"/>
                            </div>
                        </div>
                        <div class="uk-width-1-5@m uk-width-1-1@s">
                            <h:outputLabel styleClass="uk-form-label uk-text-capitalize" for="licencias" value="#{administracion['schooldetail.licensetotal']}" />
                            <div class="uk-form-controls">
                                <h:inputText id="licencias" pt:placeholder="2" disabled="true" styleClass="uk-input" value="#{licenciasControlador.collectionDataModel.wrappedData.size()}"/>
                            </div>
                        </div>
                        <div class="uk-width-1-6@m uk-width-1-1@s centrado-vertical-switch">
                            <h:panelGroup styleClass="uk-form-label uk-text-capitalize">Bloqueo alumno</h:panelGroup>
                            <h:outputLabel styleClass="switch">
                                <h:selectBooleanCheckbox styleClass="uk-checkbox" value="#{detalleEscuelaControlador.escuelaDetalleModelo.bloqueoAlumno}">
                                    <f:ajax listener="#{detalleEscuelaControlador.bloqueoAlumno}"/>
                                </h:selectBooleanCheckbox>
                                <span class="slider round"/>
                            </h:outputLabel>
                        </div>
                        <div class="uk-width-1-6@m uk-width-1-1@s centrado-vertical-switch" >
                            <h:panelGroup styleClass="uk-form-label uk-text-capitalize">Bloqueo otros</h:panelGroup>
                            <h:outputLabel styleClass="switch">
                                    <h:selectBooleanCheckbox styleClass="uk-checkbox" value="#{detalleEscuelaControlador.escuelaDetalleModelo.bloqueoProfesor}">
                                        <f:ajax listener="#{detalleEscuelaControlador.bloqueaProfesor}"/>
                                    </h:selectBooleanCheckbox>
                                <span class="slider round"/>
                            </h:outputLabel>
                        </div>
                        <div class="uk-width-2-5@m uk-width-1-1@s">
                            <h:outputText styleClass="uk-form-label uk-text-capitalize uk-text-center" for="licencias" value="Personal"/>
                            <div class="uk-form-controls uk-flex uk-flex-right">
                                <h:link styleClass="uk-button uk-button-primary uk-margin-right btn-estilo" outcome="ciclos-escolares">
                                    <h:outputText value="Ciclos Escolares" styleClass="uk-margin-small-right"/>
                                    <h:outputText styleClass="uk-icon" pt:uk-icon="icon: users"/>
                                    <f:param name="escuela" value="#{param['escuela']}"/>
                                </h:link>
                                <h:link styleClass="uk-button uk-button-primary uk-margin-small-right btn-estilo" outcome="profesor">
                                    <h:outputText value="Profesores" styleClass="uk-margin-small-right"/>
                                    <h:outputText styleClass="uk-icon" pt:uk-icon="icon: users"/>
                                    <f:param name="escuela" value="#{param['escuela']}"/>
                                </h:link>
                                <h:link styleClass="uk-button uk-button-primary btn-estilo" outcome="coordinador">
                                    <h:outputText value="Coordinadores" styleClass="uk-margin-small-right"/>
                                    <h:outputText styleClass="uk-icon" pt:uk-icon="icon: users"/>
                                    <f:param name="escuela" value="#{param['escuela']}"/>
                                </h:link>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:form>
            </div>
        </div>
        <h:panelGroup layout="block"  styleClass="uk-margin-medium-top uk-margin-medium-bottom uk-grid" pt:uk-grid="" >
            <div class="uk-width-1-1@m ">
                <div class="uk-card uk-card-default uk-card-small uk-card-hover">
                    <div class="uk-card-header">
                        <div class="uk-grid uk-grid-small">
                            <div class="uk-width-auto"><h4><span class="uk-text-middle uk-text-capitalize">#{administracion['schooldetail.licenses']}</span></h4></div>
                            <div class="uk-width-expand uk-text-right panel-icons">
                                <h:form>
                                    <ui:remove>
                                    <h:commandLink styleClass="uk-icon-button  uk-icon">
                                        <f:ajax render="formulario-licencia formulario-paginacion-licencia" listener="#{licenciasControlador.inserta}"/>
                                        <h:outputText pt:uk-icon="icon: plus-circle; ratio: 1.5"
                                                      styleClass="uk-text-primary"
                                                      pt:uk-tooltip="title:#{administracion['schooldetail.lisense.tooltip.add']}; delay:2000; pos: top"/>
                                    </h:commandLink>
                                    </ui:remove>
                                    <a href="#" class="uk-text-primary" uk-icon="icon: plus-circle; ratio: 1.5" uk-toggle="target: #modal-licencia" uk-tooltip="title:#{administracion['schooldetail.lisense.tooltip.add']}; pos: left; delay: 2000"/>
                                </h:form>
                            </div>
                        </div>
                    </div>
                    <div class="uk-card-body dropdown-licencia">
                        <div >
                        <h:form id="formulario-licencia">
                            <ui:fragment rendered="#{empty licenciasControlador.collectionDataModel.wrappedData}">
                                <table class="uk-table uk-table-middle">
                                    <thead class="uk-background-primary">
                                        <tr>
                                            <th><span class="letra-titulo">#{administracion['schooldetail.lisense.id']}</span></th>
                                            <th><span class="letra-titulo">#{administracion['schooldetail.lisense.datestart']}</span></th>
                                            <th><span class="letra-titulo">#{administracion['schooldetail.lisense.dateacquisition']}</span></th>
                                            <th><span class="letra-titulo ">#{etiqueta['options']}</span></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="4">
                                                <div class="uk-flex uk-flex-center">
                                                    <h:graphicImage library="img" name="vacio.svg" height="215" width="243" alt="vacio"/>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot class="uk-background-primary">
                                        <tr>
                                            <td colspan="6">
                                                <span class="letra-titulo">
                                                    <h:outputFormat value="#{etiqueta['pages.total']}" styleClass="letra-titulo">
                                                        <f:param value="#{licenciasControlador.htmlDataTable.rowCount}"/>
                                                        <f:param value="#{licenciasControlador.htmlDataTable.rowCount}"/>
                                                        <f:param value="#{licenciasControlador.htmlDataTable.rowCount}"/>
                                                    </h:outputFormat>
                                                </span>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </ui:fragment>
                            <h:dataTable value="#{licenciasControlador.collectionDataModel.wrappedData}"
                                         binding="#{licenciasControlador.htmlDataTable}"
                                         var="licencia"
                                         id="tabla-licencias"
                                         first="0"
                                         rows="5"
                                         rendered="#{not empty licenciasControlador.collectionDataModel.wrappedData}"
                                         styleClass="uk-table uk-table-small uk-table-divider uk-table-middle uk-table-hover uk-text-center tabla-licencia"
                                         headerClass="uk-button-primary uk-text-center"
                                         footerClass="uk-background-primary uk-text-left"
                                         columnClasses=",,uk-text-center,uk-text-center,uk-text-center,uk-text-center" >
                                <h:column>
                                    <f:facet name="header"><span class="letra-titulo">alumnos</span></f:facet>
                                    #{licencia.alumnos}
                                </h:column>
                                <h:column>
                                    <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{administracion['schooldetail.lisense.datestart']}"/></f:facet>
                                    <h:outputText value="#{licencia.inicio}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </h:column>
                                <h:column>
                                    <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{administracion['schooldetail.lisense.dateacquisition']}"/></f:facet>
                                    <h:outputText value="#{licencia.adquisicion}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputText>
                                </h:column>
                                <h:column>
                                    <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{etiqueta['options']}"/></f:facet>
                                    <div class="uk-inline ">
                                        <button class="uk-icon-button puntero uk-text-primary" uk-icon="more-vertical" type="button"/>
                                        <h:panelGroup layout="block" styleClass="uk-dropdown" pt:uk-dropdown="boundary: .dropdown-licencia; mode: click" id="licencia-menu">
                                            <ul class="uk-nav uk-dropdown-nav uk-text-left">
                                                <li>
                                                    <h:commandLink  pt:uk-toggle="target: #modal-licencia" styleClass="uk-text-primary">
                                                        <h:outputText pt:uk-icon="icon: file-edit" styleClass="uk-margin-small-right uk-icon" />
                                                        <span class="uk-text-middle"><h:outputText value="#{boton['edit']}"/></span>
                                                        <f:setPropertyActionListener value="#{licencia}" target="#{licenciasControlador.licenciaModelo}"/>
                                                        <f:ajax render="formulario-modal-licencia"/>
                                                    </h:commandLink>
                                                </li>
                                            </ul>
                                        </h:panelGroup>
                                    </div>
                                </h:column>
                                <f:facet name="footer">
                                    <pa:pie-tabla htmlDataTable="#{licenciasControlador.htmlDataTable}"/>
                                </f:facet>
                            </h:dataTable>
                        </h:form>
                        </div>
                    </div>
                    <div class="uk-card-footer">
                        <f:ajax render="formulario-licencia formulario-paginacion-licencia">
                            <h:form id="formulario-paginacion-licencia">
                                <div uk-grid="">
                                    <div class="uk-panel uk-flex uk-flex-left">
                                        <pa:boton-minimizado htmlDataTable="#{licenciasControlador.htmlDataTable}"/>
                                    </div>
                                </div>
                            </h:form>
                        </f:ajax>
                    </div>
                </div>
            </div>
            <div class="uk-width-1-1@m ">
                <div class="uk-card uk-card-default uk-card-small uk-card-hover" >
                    <div class="uk-card-header">
                        <div class="uk-grid uk-grid-small">
                            <div class="uk-width-auto"><h4><h:outputText styleClass="uk-text-middle uk-text-capitalize" value="#{administracion['schooldetail.contacts']}"/></h4></div>
                            <div class="uk-width-expand uk-text-right panel-icons">
                                <h:form>
                                    <h:commandLink styleClass="uk-icon-button  uk-icon" pt:uk-toggle="target: #modal-agregar-contacto">
                                        <f:ajax></f:ajax>
                                        <h:outputText pt:uk-icon="icon: plus-circle; ratio: 1.5"
                                                      styleClass="uk-text-primary"
                                                      pt:uk-tooltip="title:#{administracion['schooldetail.contacts.tooltip.add']}; delay:2000; pos: top"/>
                                    </h:commandLink>
                                </h:form>
                            </div>
                        </div>
                    </div>
                    <div class="uk-card-body">
                        <div >
                            <h:form id="formulario-tabla-contacto">
                                <ui:fragment rendered="#{empty contactoControlador.collectionDataModel.wrappedData}">
                                    <table class="uk-table uk-table-middle">
                                        <thead class="uk-background-primary">
                                        <tr>
                                            <th><span class="letra-titulo uk-text-uppercase">#{administracion['schooldetail.contacts.id']}</span></th>
                                            <th><span class="letra-titulo uk-text-capitalize">#{administracion['schooldetail.contacts.name']}</span></th>
                                            <th><span class="letra-titulo uk-text-capitalize">#{administracion['schooldetail.contacts.type']}</span></th>
                                            <th><span class="letra-titulo uk-text-capitalize">#{administracion['schooldetail.contacts.phone']}</span></th>
                                            <th><span class="letra-titulo uk-text-capitalize">#{administracion['schooldetail.contacts.email']}</span></th>
                                            <th><span class="letra-titulo ">#{etiqueta['options']}</span></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td colspan="6">
                                                <div class="uk-flex uk-flex-center">
                                                    <h:graphicImage library="img" name="vacio.svg" height="215" width="243" alt="vacio"/>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tfoot class="uk-background-primary">
                                        <tr>
                                            <td colspan="6"><span class="letra-titulo">
                                                <h:outputFormat value="#{etiqueta['pages.total']}" styleClass="letra-titulo">
                                                    <f:param value="#{contactoControlador.htmlDataTable.rowCount}"/>
                                                    <f:param value="#{contactoControlador.htmlDataTable.rowCount}"/>
                                                    <f:param value="#{contactoControlador.htmlDataTable.rowCount}"/>
                                                </h:outputFormat>
                                            </span></td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </ui:fragment>
                                <h:dataTable value="#{contactoControlador.collectionDataModel}"
                                             binding="#{contactoControlador.htmlDataTable}"
                                             var="contacto"
                                             id="tabla-contacto"
                                             rendered="#{not empty contactoControlador.collectionDataModel.wrappedData}"
                                             first="0"
                                             rows="5"
                                             styleClass="uk-table uk-table-small uk-table-divider uk-table-middle uk-table-hover uk-text-center tabla-escuela-contacto"
                                             headerClass="uk-background-primary uk-text-center"
                                             footerClass="uk-background-primary uk-text-left"
                                             columnClasses=",uk-text-left,,,">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText styleClass="letra-titulo"
                                                          value="#{administracion['schooldetail.contacts.id']}"/>
                                        </f:facet>
                                        #{contacto.contador}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{administracion['schooldetail.contacts.name']}" /></f:facet>
                                        #{contacto.nombre}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{administracion['schooldetail.contacts.type']}" /></f:facet>
                                        #{contacto.tipoContactoModelo.valor}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{administracion['schooldetail.contacts.phone']}"/></f:facet>
                                        #{contacto.telefono}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{administracion['schooldetail.contacts.email']}" /></f:facet>
                                        #{contacto.correoElectronico}
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header"><h:outputText styleClass="letra-titulo" value="#{etiqueta['options']}" /></f:facet>
                                        <div class="uk-inline ">
                                            <button class="uk-icon-button puntero uk-text-primary" uk-icon="more-vertical" type="button"/>
                                            <h:panelGroup layout="block" styleClass="uk-dropdown" pt:uk-dropdown="boundary:.tabla-escuela-contacto; mode: click" id="juan">
                                                <ul class="uk-nav uk-dropdown-nav uk-text-left">
                                                    <li>
                                                        <h:commandLink  pt:uk-toggle="target: #modal-agregar-contacto" styleClass="uk-text-primary">
                                                            <h:outputText pt:uk-icon="icon: file-edit" styleClass="uk-margin-small-right uk-icon" />
                                                            <span class="uk-text-middle"><h:outputText value="#{boton['edit']}"/></span>
                                                            <f:setPropertyActionListener value="#{contacto}" target="#{contactoControlador.contactoModelo}"/>
                                                            <f:setPropertyActionListener value="#{contacto.tipoContactoModelo}" target="#{contactoControlador.tipoContactoModelo}"/>
                                                            <f:ajax render="formulario-agregar-contacto" onevent="function funcion(data) { limpiaSelect(data) }"/>
                                                        </h:commandLink>
                                                    </li>
                                                    <li class="uk-nav-divider"/>
                                                    <li>
                                                        <h:commandLink  pt:uk-toggle="target: #modal-eliminar-contacto" styleClass="uk-text-danger">
                                                            <h:outputText pt:uk-icon="icon: trash" styleClass="uk-margin-small-right uk-icon" />
                                                            <span class="uk-text-middle"><h:outputText value="#{boton['remove']}"/></span>
                                                            <f:setPropertyActionListener value="#{contacto}" target="#{contactoControlador.contactoModelo}"/>
                                                            <f:ajax render="formulario-eliminar-contacto"/>
                                                        </h:commandLink>
                                                    </li>
                                                </ul>
                                            </h:panelGroup>
                                        </div>
                                    </h:column>
                                    <f:facet name="footer">
                                        <pa:pie-tabla htmlDataTable="#{contactoControlador.htmlDataTable}"/>
                                    </f:facet>
                                </h:dataTable>
                            </h:form>
                        </div>
                    </div>
                    <div class="uk-card-footer">
                        <f:ajax render="formulario-paginacion-contacto formulario-tabla-contacto">
                            <h:form id="formulario-paginacion-contacto">
                                <div uk-grid="">
                                    <div class="uk-panel uk-flex uk-flex-left uk-width-1-1@s uk-width-1-2@m">
                                        <pa:boton-minimizado htmlDataTable="#{contactoControlador.htmlDataTable}"/>
                                    </div>
                                </div>
                            </h:form>
                        </f:ajax>
                    </div>
                </div>
            </div>
        </h:panelGroup>
<!--        Modal agreagr contacto          -->
        <h:panelGroup layout="block" id="modal-agregar-contacto" pt:uk-modal="" >
            <div class="uk-modal-dialog uk-margin-auto-vertical">
                <div class="uk-modal-header uk-background-secondary">
                    <p class="uk-h4 uk-text-center uk-text-bold">
                        <h:outputText styleClass="letra-titulo uk-text-capitalize" value="#{administracion['schooldetail.modal.addcontact.title']}" rendered="#{empty contactoControlador.contactoModelo.contador}"/>
                        <h:outputText styleClass="letra-titulo uk-text-capitalize" value="#{administracion['schooldetail.modal.updatecontact']}" rendered="#{not empty contactoControlador.contactoModelo.contador}"/>
                    </p>
                </div>
                <h:form styleClass="uk-form-stacked" id="formulario-agregar-contacto">
                    <div class="uk-modal-body">
                        <h:panelGroup layout="block" pt:uk-grid="" styleClass="uk-grid">
                            <div class="uk-width-1-1">
                                <h:outputLabel styleClass="uk-form-label uk-text-capitalize" for="enrtada-nombre-contacto" value="#{administracion['schooldetail.contacts.name']}"/>
                                <div class="uk-form-controls">
                                    <h:inputText styleClass="uk-input"
                                                 id="enrtada-nombre-contacto"
                                                 value="#{contactoControlador.contactoModelo.nombre}"
                                                 pt:placeholder="Nombre">
                                        <f:validateRequired/>
                                        <f:validateLength minimum="2" maximum="30"/>
                                    </h:inputText>
                                </div>
                                <h:message for="enrtada-nombre-contacto" styleClass="uk-text-danger"/>
                            </div>
                            <div class="uk-width-1-2">
                                <h:outputLabel styleClass="uk-form-label uk-text-capitalize" for="seleccion-tipo-contacto" value="#{administracion['schooldetail.contacts.type']}"/>
                                <div class="uk-form-controls">
                                    <h:selectOneMenu value = "#{contactoControlador.tipoContactoModelo.clave}"
                                                     styleClass="uk-select"
                                                     id="seleccion-tipo-contacto"
                                                     label="Tipo contacto">
                                        <f:selectItem itemValue = "#{null}" itemLabel = "#{etiqueta['select']}" noSelectionOption="true" />
                                        <f:selectItems value="#{contactoControlador.tipoContactoModeloLista}" var="contacto"
                                                       itemValue="#{contacto.clave}"
                                                       itemLabel="#{contacto.valor}"/>
                                        <f:validateRequired/>
                                    </h:selectOneMenu>
                                </div>
                                <h:message for="seleccion-tipo-contacto" styleClass="uk-text-danger"/>
                            </div>
                            <div class="uk-width-1-2">
                                <label class="uk-form-label uk-text-capitalize" for="entrada-telefono" >#{administracion['schooldetail.contacts.phone']}</label>
                                <div class="uk-form-controls">
                                    <h:inputText id="entrada-telefono" styleClass="uk-input"
                                                 value="#{contactoControlador.contactoModelo.telefono}">
                                        <f:validateRequired/>
                                        <f:validateLength minimum="7" maximum="20"/>
                                    </h:inputText>
                                </div>
                                <h:message for="entrada-telefono" styleClass="uk-text-danger"/>
                            </div>
                            <div class="uk-width-1-1">
                                <h:outputLabel styleClass="uk-form-label uk-text-capitalize" value="#{administracion['schooldetail.contacts.email']}" for="entrada-correo-electronico"/>
                                <div class="uk-form-controls">
                                    <h:inputText id="entrada-correo-electronico"
                                                 styleClass="uk-input"
                                                 value="#{contactoControlador.contactoModelo.correoElectronico}">
                                        <f:validateRequired/>
                                        <f:validateLength maximum="100"/>
                                    </h:inputText>
                                </div>
                                <h:message for="entrada-correo-electronico" styleClass="uk-text-danger"/>
                            </div>
                        </h:panelGroup>
                    </div>
                    <div class="uk-modal-footer uk-text-right">
                        <h:commandButton styleClass="uk-button uk-button-default uk-modal-close uk-margin-small-right" value="#{boton['cancel']}">
                            <f:ajax render="@form" listener="#{contactoControlador.limpiaModelo}" onevent="function funcion(data) { limpiaSelect(data) }"/>
                        </h:commandButton>
                        <h:commandButton styleClass="uk-button uk-button-secondary" value="#{boton['add']}" rendered="#{empty contactoControlador.contactoModelo.contador}">
                            <f:ajax execute="@form"
                                    render="@form formulario-tabla-contacto formulario-paginacion-contacto"
                                    listener="#{contactoControlador.agregar}"
                                    onevent="function cerrar(data) { cierraModal(data,'modalAgregar') }"/>
                        </h:commandButton>
                        <h:commandButton styleClass="uk-button uk-button-secondary" value="#{boton['update']}" rendered="#{not empty contactoControlador.contactoModelo.contador}">
                            <f:ajax execute="@form"
                                    render="@form formulario-tabla-contacto formulario-paginacion-contacto"
                                    listener="#{contactoControlador.actualiza}"
                                    onevent="function cerrar(data) { cierraModal(data,'modalAgregar') }"/>
                        </h:commandButton>
                    </div>
                </h:form>
            </div>
        </h:panelGroup>
<!--        Modal eliminar contacto         -->
        <h:panelGroup layout="block" id="modal-eliminar-contacto" pt:uk-modal="">
            <div class="uk-modal-dialog uk-margin-auto-vertical">
                <h:form id="formulario-eliminar-contacto">
                    <div class="uk-modal-header fondo-peligro">
                        <p class="uk-h4 uk-text-center uk-text-bold" ><span class="letra-titulo uk-text-capitalize">#{administracion['schooldetail.modal.removecontact.title']}</span></p>
                    </div>
                    <div class="uk-modal-body">
                        <p>
                            <h:outputFormat value="#{administracion['schooldetail.modal.removecontact.message']}" styleClass="primera-mayuscula" style="display: block">
                                <f:param value="#{contactoControlador.contactoModelo.nombre}"/>
                            </h:outputFormat>
                        </p>
                    </div>
                    <div class="uk-modal-footer uk-text-right">
                        <button class="uk-button uk-button-default uk-modal-close" type="button">#{boton['cancel']}</button>
                        <h:commandButton styleClass="uk-button uk-button-danger uk-margin-small-left" value="#{boton['accept']}" >
                            <f:ajax execute="@form"
                                    render="formulario-tabla-contacto"
                                    listener="#{contactoControlador.eliminar}"
                                    onevent="function cerrar(data) { cierraModal(data,'modalEliminar') }"/>
                        </h:commandButton>
                    </div>
                </h:form>
            </div>
        </h:panelGroup>
<!--        Modal licencia                  -->
        <h:panelGroup layout="block" id="modal-licencia" pt:uk-modal="">
            <div class="uk-modal-dialog uk-margin-auto-vertical">
                <h:form id="formulario-modal-licencia" styleClass="uk-form-stacked">
                    <div class="uk-modal-header uk-background-secondary">
                        <p class="uk-h4 uk-text-center uk-text-bold">
                            <h:outputFormat styleClass="letra-titulo primera-mayuscula"
                                            rendered="#{not empty licenciasControlador.licenciaModelo.contador}"
                                            value="#{administracion['schooldetail.modal.updatelicense.title']}"
                                            style="display: block">
                            </h:outputFormat>
                            <h:outputFormat styleClass="letra-titulo primera-mayuscula uk-display-inline-block"
                                            rendered="#{empty licenciasControlador.licenciaModelo.contador}"
                                            value="nueva licencia"/>
                        </p>
                    </div>
                    <div class="uk-modal-body">
                        <h:panelGroup styleClass="uk-grid"  pt:uk-grid="" >
                            <div class="uk-width-1-2">
                                <h:outputLabel styleClass="uk-form-label uk-text-capitalize" value="fecha inicio" for="fecha-inicio" />
                                <div class="uk-form-controls">
                                    <h:inputText id="fecha-inicio"
                                                 styleClass="uk-input"
                                                 value="#{licenciasControlador.licenciaModelo.inicio}"
                                                 pt:placeholder="dd/MM/yyyy"
                                                 pt:oninput="entradaFecha(event)">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        <f:validateRequired/>
                                    </h:inputText>
                                </div>
                                <h:message for="fecha-inicio" styleClass="uk-text-danger"/>
                            </div>
                            <div class="uk-width-1-2">
                                <h:outputLabel styleClass="uk-form-label uk-text-capitalize" for="alumnos" value="alumnos"/>
                                <div class="uk-form-controls">
                                    <h:inputText id="alumnos"
                                                 pt:oninput="entradaNumero(event)"
                                                 styleClass="uk-input uk-text-capitalize"
                                                 value="#{licenciasControlador.licenciaModelo.alumnos}">
                                        <f:validateRequired/>
                                    </h:inputText>
                                </div>
                                <h:message for="alumnos" styleClass="uk-text-danger"/>
                            </div>
                        </h:panelGroup>
                    </div>
                    <div class="uk-modal-footer uk-flex uk-flex-right">
                        <h:commandButton styleClass="uk-button uk-button-default" value="#{boton['cancel']}">
                            <f:ajax render="@form" listener="#{licenciasControlador.limpiaModal}" onevent="function cerrar(data) { cierraModal(undefined, 'modalLicencia') }"/>
                        </h:commandButton>
                        <h:commandButton styleClass="uk-button uk-button-secondary  uk-margin-small-left" value="#{boton['add']}" rendered="#{empty licenciasControlador.licenciaModelo.contador}">
                            <f:ajax onevent="function cerrar(data) { cierraModal(data,'modalLicencia') }"
                                    render="formulario-licencia @form" execute="@form"
                                    listener="#{licenciasControlador.inserta}"/>
                        </h:commandButton>
                        <h:commandButton styleClass="uk-button uk-button-secondary  uk-margin-small-left" value="#{boton['update']}" rendered="#{not empty licenciasControlador.licenciaModelo.contador}">
                            <f:ajax onevent="function cerrar(data) { cierraModal(data,'modalLicencia') }"
                                    render="formulario-licencia @form" execute="@form"
                                    listener="#{licenciasControlador.actualiza}"/>
                        </h:commandButton>
                    </div>
                </h:form>
            </div>
        </h:panelGroup>
        <script type="text/javascript">
            var modalAgregar;
            var modalEliminar;
            var modalLicencia;
            var modalEditar;
            document.addEventListener("DOMContentLoaded", function (evt) {
                limpiaSelect();
                modalAgregar = document.querySelector('#modal-agregar-contacto');
                modalEliminar = document.querySelector('#modal-eliminar-contacto');
                modalLicencia = document.querySelector('#modal-licencia');
                UIkit.util.on('#modal-eliminar-contacto', 'show', function () {
                    modalEliminar.querySelector('.uk-modal-body').click();
                });
                UIkit.util.on('#modal-agregar-contacto', 'show', function () {
                    modalAgregar.querySelector('.uk-modal-body').click();
                });
                UIkit.util.on('#modal-licencia', 'show', function () {
                    modalLicencia.querySelector('.uk-modal-body').click();
                });
                document.querySelectorAll('.selectorFecha').forEach(function (value) {
                    var selectorFecha = new SelectorFecha();
                    selectorFecha.creaSelector(value);
                });
            });

            function creaFechaSelector(data, componente) {
                if (data.status === 'success') {
                    var selectorFecha = new SelectorFecha();
                    selectorFecha.creaSelector(modalLicencia.querySelector('.uk-modal-body'));
                }
            }

            function limpiaSelect(data) {
                if (typeof data === 'undefined') {
                    document.querySelectorAll('.uk-select').forEach(
                        function (value) { value.removeAttribute('size'); }
                    )
                } else {
                    if (data.status === 'success') {
                        document.querySelectorAll('.uk-select').forEach(
                            function (value) { value.removeAttribute('size'); }
                        )
                    }
                }
            }
            function cierraModal(data,modal) {
                if (!data) {
                    switch (modal) {
                        case "modalLicencia":
                            if (modalLicencia.querySelector('.uk-text-danger') === null){
                                UIkit.modal(modalLicencia).hide();
                            }
                            break;
                        default: console.error(modal);
                    }
                } else {
                    if (data.status === "success"){
                        switch (modal) {
                            case "modalEliminar":
                                if (modalEliminar.querySelector('.uk-text-danger') === null) {
                                    UIkit.modal(modalEliminar).hide();
                                }
                                break;
                            case "modalAgregar":
                                if (modalAgregar.querySelector('.uk-text-danger') === null){
                                    UIkit.modal(modalAgregar).hide();
                                }
                                break;
                            case "modalLicencia":
                                if (modalLicencia.querySelector('.uk-text-danger') === null){
                                    UIkit.modal(modalLicencia).hide();
                                    modalLicencia.querySelectorAll('input').forEach(entrada => entrada.value = '');
                                }
                                break;
                            case "modalEditar":
                                if (modalEditar.querySelector('.uk-text-danger') === null){
                                    UIkit.modal(modalEditar).hide();
                                }
                                break;
                            default: console.error(modal);
                        }
                    }
                }
            }
        </script>
        <h:outputScript library="js" name="nah.js"/>
    </ui:define>
</ui:composition>
</html>
