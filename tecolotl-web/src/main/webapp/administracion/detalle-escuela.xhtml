<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: Juan Carlos Flores GarcÃ­a
  Date: 12/12/18
  Time: 11:09 AM
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	>

<ui:composition template="/template/template.xhtml">
	<ui:define name="contenido2">
		<div id="content" data-uk-height-viewport="expand: true">
			<div class="uk-padding">
				<div class="uk-overflow-auto">

					<h1 class="uk-heading-line uk-text-center"><span>#{mensaje['school-details.heading']}</span></h1>
					<h:form class="uk-form-stacked">
						<div class="uk-grid-small" uk-grid="">						
							<div class="uk-width-1-1@s uk-width-1-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.cct']}" for="input-cct" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.claveCentroTrabajo}" disabled="true"
										id="input-cct" label="#{mensaje['school.cct']}">
									</h:inputText>
								</div>
							</div>							
							<div class="uk-width-1-1@s uk-width-4-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.name']}" for="input-nombre" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.nombre}" disabled="true"
										id="input-nombre" label="#{mensaje['school.name']}">
									</h:inputText>
								</div>
							</div>							
							<div class="uk-width-1-1@s uk-width-1-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.postalcode']}" for="input-cp" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.codigoPostal}" disabled="true"
										id="input-cp" label="#{mensaje['school.postalcode']}">
									</h:inputText>
								</div>
							</div>														
							<div class="uk-width-1-1@s uk-width-4-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.colony']}" for="input-colonia" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.colonia}" disabled="true"
										id="input-colonia" label="#{mensaje['school.colony']}">
									</h:inputText>
								</div>
							</div>										
							<div class="uk-width-1-1@s uk-width-3-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.city']}" for="input-municipio" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.municipio}" disabled="true"
										id="input-municipio" label="#{mensaje['school.city']}">
									</h:inputText>
								</div>
							</div>							
							<div class="uk-width-1-1@s uk-width-2-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.town']}" for="input-estado" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.estado}" disabled="true"
										id="input-estado" label="#{mensaje['school.town']}">
									</h:inputText>
								</div>
							</div>										
							<div class="uk-width-1-1@s uk-width-3-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.street']}" for="input-calle" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.calle}" disabled="true"
										id="input-calle" label="#{mensaje['school.street']}">
									</h:inputText>
								</div>
							</div>	
												
							<div class="uk-width-1-1@s uk-width-1-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.street.num.ext']}" for="input-numero-ext" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.numeroExterior} " disabled="true"
										id="input-numero-ext" label="#{mensaje['school.street.num.ext']}">
									</h:inputText>
								</div>
							</div>	
							
							<div class="uk-width-1-1@s uk-width-1-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
									value="#{mensaje['school.street.num.int']}" for="input-numero-interior" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
										value="#{escuelaDetalleControlador.escuelaDetalleDto.numeroInterior}" disabled="true"
										id="input-numero-interior" label="#{mensaje['school.street.num.int']}">
									</h:inputText>
								</div>
							</div>

							<div class="uk-width-1-1@s uk-width-1-5@m">
								<h:outputLabel styleClass="uk-text-capitalize uk-form-label"
											   value="#{mensaje['school.blockreason.title']}" for="razon-bloqueo" />
								<div class="uk-form-controls">
									<h:inputText styleClass="uk-input"
												 value="#{escuelaDetalleControlador.escuelaDetalleDto.motivoBlqueo}" disabled="true"
												 id="razon-bloqueo" label="#{mensaje['school.blockreason.title']}">
									</h:inputText>
								</div>
							</div>

						</div>
					</h:form>

					<h2 class="uk-heading-line uk-text-center"><span>#{mensaje['school-details.contact']}</span></h2>

					<h:panelGroup id="panel-contacto">
					<h:dataTable id="tabla-escuela-detalle"
								 value="#{escuelaDetalleControlador.escuelaDetalleDto.contactoDtoList}"
								 var="contacto"
								 styleClass="limite uk-table uk-table-middle uk-table-hover uk-table-striped"
								 headerClass="uk-background-primary uk-dark"
								 rendered="#{not empty escuelaDetalleControlador.escuelaDetalleDto.contactoDtoList}"	>
						<h:column>
							<f:facet name="header" >
								#{mensaje['school-details.table.name']}
							</f:facet>
							#{contacto.nombre}
						</h:column>
						<h:column>
							<f:facet name="header">#{mensaje['school-details.table.type']}</f:facet>
							#{contacto.tipoContactoDto.descripcion}
						</h:column>
						<h:column>
							<f:facet name="header">#{mensaje['school-details.table.phone']}</f:facet>
							#{contacto.telefono}
						</h:column>
						<h:column>
							<f:facet name="header">#{mensaje['school-details.table.option']}</f:facet>
							<div class="uk-inline">
								<button class="uk-icon-button puntero" uk-icon="more-vertical" type="button" >   </button>
								<div uk-dropdown="boundary:.limite; mode: click">
									<ul class="uk-nav uk-dropdown-nav">
										<h:form>
											<li><a href="#"><span uk-icon="icon: file-edit" class="uk-margin-small-right uk-icon" ></span>  <span class="uk-text-middle">#{mensaje['school-details.table.option.edit']}</span></a></li>
											<li>
												<h:commandLink  pt:uk-toggle="target: #modal-elimina-contacto" >
													<span uk-icon="icon: trash" class="uk-margin-small-right uk-icon" ></span>
													<span class="uk-text-middle">#{mensaje['school-details.table.option.delete']}</span>
													<f:ajax listener="#{escuelaDetalleControlador.actualiza(contacto)}"  />
												</h:commandLink>
											</li>
										</h:form>
									</ul>
								</div>
							</div>
						</h:column>
					</h:dataTable>
					<h:panelGroup id="panel-vacio" rendered="#{empty escuelaDetalleControlador.escuelaDetalleDto.contactoDtoList}">
						 <table class="uk-table uk-table-middle uk-table-hover uk-table-striped  ">
							 <thead>
							 <tr class=" uk-border-rounded">
							 	<th class="uk-background-primary uk-dark ">#{mensaje['school-details.table.name']}</th>
							 	<th class="uk-background-primary uk-dark">#{mensaje['school-details.table.type']}</th>
							 	<th class="uk-background-primary uk-dark">#{mensaje['school-details.table.phone']}</th>
							 	<th class="uk-background-primary uk-dark ">#{mensaje['school-details.table.option']}</th>
							 </tr>
							 </thead>
							 <tbody>
							   <tr>
								   <td colspan="5" align="center"><h:graphicImage library="img" name="vacio.svg" height="250px" width="250px" /></td>
							   </tr>
							 </tbody>
						 </table>
					</h:panelGroup>
					<div class="uk-flex uk-flex-right uk-margin">
						<button class="uk-button uk-button-primary uk-border-rounded" uk-toggle="target: #modal-contacto"><h:outputText value="#{mensaje['button.add']}"/></button>
					</div>
					</h:panelGroup>
					<div id="modal-contacto"  uk-modal="">
					   	<div class="uk-modal-dialog">
							<button class="uk-modal-close-default" type="button" uk-close=""></button>
							<div class="uk-modal-header">
								<h2 class="uk-modal-title uk-text-center">#{mensaje['school-details.new']}</h2>
							</div>
							<h:form id="formulario-agregar-contacto"  styleClass="uk-form-stacked">
								<div class="uk-modal-body">
									<div class="uk-grid-small" uk-grid="">
										<div class="uk-width-1-1">
											<h:outputLabel styleClass="uk-text-capitalize uk-form-label" value="Nombre" for="input-nombre-contacto" />
											<div class="uk-form-controls">
												<h:inputText
														styleClass="uk-input"
														id="input-nombre-contacto"
														value="#{escuelaDetalleControlador.contactoDtoModelo.nombre}"
														pt:placeholder="#{mensaje['school.name']}"
														autocomplete="off"
														label="nombre">
													<f:validateRequired/>
													<f:validateLength minimum="11" maximum="110"/>
												</h:inputText>
											</div>
										</div>
										<div class="uk-width-1-2">
											<h:outputLabel styleClass="uk-text-capitalize uk-form-label" value="#{mensaje['school-details.table.type']}" for="seleccion-tipo-contacto" />
											<div class="uk-form-controls">
												<h:selectOneMenu
														id="seleccion-tipo-contacto"
														value="#{escuelaDetalleControlador.tipoContacto}"
														label="Tipo contacto"
														styleClass="uk-select">
													<f:selectItem itemLabel="#{mensaje['label.select']}" noSelectionOption="true"/>
													<f:selectItems value="#{escuelaDetalleControlador.tipoContactoDtoLista}" var="tipoContacto" itemValue="#{tipoContacto.id}" itemLabel="#{tipoContacto.descripcion}"/>
													<f:validateRequired/>
												</h:selectOneMenu>
											</div>
										</div>
										<div class="uk-width-1-2">
											<h:outputLabel styleClass="uk-text-capitalize uk-form-label" value="#{mensaje['school-details.table.phone']}" for="input-telefono" />
											<div class="uk-form-controls">
												<h:inputText
														id="input-telefono"
														styleClass="uk-input"
														value="#{escuelaDetalleControlador.contactoDtoModelo.telefono}"
														pt:placeholder="#{mensaje['school-details.table.phone']}"
														autocomplete="off"
														label="#{mensaje['school-details.table.phone']}">
													<f:validateRequired/>
													<f:validateLength minimum="7" maximum="20"/>

												</h:inputText>
											</div>
										</div>
										<div class="uk-width-1-2">
											<h:messages showDetail="false" styleClass="uk-list uk-alert-danger uk-alert" id="mensajes-error"/>
										</div>
									</div>
								</div>
								<div class="uk-modal-footer uk-text-right">
									<button class="uk-button uk-button-default uk-modal-close uk-margin-small-right" type="button"><h:outputText value="#{mensaje['button.cancel']}"/></button>
									<h:commandButton styleClass="uk-button uk-button-primary uk-border-rounded" value="#{mensaje['button.accept']}">
										<f:ajax listener="#{escuelaDetalleControlador.insertar}" execute="@form" render="@form panel-contacto modal-contacto" onevent="actualiza"/>
									</h:commandButton>
								</div>
							</h:form>
						</div>
					</div>
					<div id="modal-elimina-contacto" uk-modal="">
						<div class="uk-modal-dialog">
							<div class="uk-modal-header">
								<h3 class="uk-modal-title uk-text-capitalize uk-text-center uk-text-danger">
									Eliminar contacto
								</h3>
							</div>
							<div class="uk-modal-body">
								<p>
									Esta seguro que desea a elminiar el contacto: #{contacto.nombre}
								</p>
							</div>
							<div class="uk-modal-footer uk-flex uk-flex-right">
								<button class="uk-button uk-button-default uk-modal-close uk-border-rounded uk-margin-right" type="button">#{mensaje['button.cancel']}</button>
								<h:form id="formulario-eliminar-contacto">
									<h:commandButton
											styleClass="uk-button uk-button-danger uk-modal-close uk-border-rounded"
											value="#{mensaje['button.remove']}">
										<f:ajax listener="#{escuelaDetalleControlador.eliminar}" render="panel-contacto" onevent="actualiza"/>
									</h:commandButton>
								</h:form>
							</div>
						</div>
					</div>	1
				</div>
			</div>
		</div>
		<script type="text/javascript">
		document.addEventListener("DOMContentLoaded", function (evt) {
			limpiarSelector("undefined");
		});
		function limpiarSelector(informacion) {
			if (informacion === "undefined") {
				document.getElementById('formulario-agregar-contacto:seleccion-tipo-contacto').removeAttribute('size');
			} else {
				if (informacion.status == 'success') {
					document.getElementById('formulario-agregar-contacto:seleccion-tipo-contacto').removeAttribute('size');
				}
			}
		}

		function actualiza(data) {
			if (data.status === 'success') {
				document.getElementById('formulario-actualiza:boton-actualizar').click();
			}
		}
	</script>

	</ui:define>
</ui:composition>

</html>