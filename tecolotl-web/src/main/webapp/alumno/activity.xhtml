<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<ui:composition template="/template/escolar/template-alumno.xhtml">
    <ui:define name="hamburguesa">
        <div class="color-nav uk-hidden@m">
            <nav class="uk-navbar-container uk-navbar-transparent" uk-navbar="">
                <div class="">
                    <a class="logo uk-logo" href="#">
                        <h:graphicImage  url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/esquadron.svg"  alt="logo" title="logo" width="30px" height="30px" />
                        <span class="lescuadron letra-logo uk-visible@m">squadron</span>
                    </a>
                </div>
                <div class="uk-navbar-right ">
                    <a class="uk-navbar-toggle" uk-navbar-toggle-icon="" href="" uk-toggle="target: #menu" type="button"/>
                </div>
                <div id="menu" uk-offcanvas="overlay: true">
                    <div class="uk-offcanvas-bar  ">
                        <button class="uk-offcanvas-close" type="button" uk-close=""/>
                        <ul class="uk-thumbnav uk-thumbnav-vertical  uk-margin-large-top">
                            <li uk-tooltip="title: #{alumno['for.all.views.dashboard']}; pos: right"><h:link outcome="dashboard"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/tierra.svg" width="40" alt=""/></h:link></li>
                            <li uk-tooltip="title: #{alumno['for.all.views.activity']}; pos: right" class="uk-active"><h:link outcome="actividades"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta1.svg" width="40" alt="" /></h:link></li>
                            <li uk-tooltip="title: #{alumno['for.all.views.glossary']}; pos: right"><h:link outcome="glosario"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta2.svg" width="40" alt="" /></h:link></li>
                            <li uk-tooltip="title: #{alumno['for.all.views.practices']}; pos: right"><h:link outcome="more-activity"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta3.svg"  width="40" alt="" /></h:link></li>
                            <li uk-tooltip="title: #{alumno['for.all.views.mind.map']}; pos: right"><h:link outcome="mapa-mental"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta4.svg" width="40" height="" alt="" /></h:link></li>
                            <li uk-tooltip="title: #{alumno['for.all.views.library']}; pos: right"><h:link outcome="biblioteca-alumno"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta5.svg" width="40" alt="" /></h:link></li>
                        </ul>
                        <div class="uk-text-center uk-display-block uk-margin-large-top">
                            <a href="#" class="uk-text-small uk-display-block uk-text-center uk-text-capitalize" style="color: black;"  data-uk-icon="icon: triangle-down; ratio: 0.7">#{etiqueta['menu']}</a>
                            <div class="uk-dropdown user-hamburguesa" data-uk-dropdown="mode: click; pos: bottom-center; animation: uk-animation-slide-bottom-small; duration: 150">
                                <h:form>
                                    <h:commandLink styleClass="uk-text-capitalize  " style="font-size: 12px;" action="#{alumnoControlador.cerrarSesion()}" value="#{etiqueta['close.sesion']}"/>
                                </h:form>
                            </div>
                        </div>

                    </div>
                </div>
            </nav>
            <div class="barra-nav"></div>
        </div>
    </ui:define>
    <ui:define name="menu">
        <a href="#contenedor-words" id="colocar" style="display: none" >boton</a>
        <div class="left-content-box  content-box-dark">
            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/avatar/astronauta-nino.svg" alt="niño" class="profile-img" rendered="#{alumnoControlador.alumnoModelo.sexo eq 'm'}"/>
            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/avatar/astronauta-nina.svg" alt="niña" class="profile-img" rendered="#{alumnoControlador.alumnoModelo.sexo eq 'f'}"/>
            <h6 class="uk-text-center uk-margin-remove-vertical text-light nombre-usuario">#{alumnoControlador.alumnoModelo.apodo}</h6>
            <div class="uk-position-relative uk-text-center uk-display-block">
                <!--Modificar los datos para mostrar en el Alumno-->
                <a href="#" class="uk-text-small uk-text-muted uk-display-block uk-text-center uk-text-capitalize" data-uk-icon="icon: triangle-down; ratio: 0.7">#{etiqueta['menu']}</a>
                <!-- user dropdown -->
                <div class="uk-dropdown user-drop" data-uk-dropdown="mode: click; pos: bottom-center; animation: uk-animation-slide-bottom-small; duration: 150">
                    <h:form>
                        <h:commandLink styleClass="uk-text-capitalize" action="#{alumnoControlador.cerrarSesion()}" value="#{etiqueta['close.sesion']}"/>
                    </h:form>
                </div>
                <!-- /user dropdown -->
            </div>
        </div>
        <div class="left-nav-wrap  uk-visible@xl ">
            <ul class="uk-thumbnav uk-thumbnav-vertical uk-position-center uk-margin-large-top">
                <li uk-tooltip="title: #{alumno['for.all.views.dashboard']}; pos: right"><h:link outcome="dashboard"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/tierra.svg" width="70" alt=""/></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.activity']}; pos: right" class="uk-active"><h:link outcome="actividades"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta1.svg" width="70" alt="" /></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.glossary']}; pos: right"><h:link outcome="glosario"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta2.svg" width="70" alt="" /></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.practices']}; pos: right"><h:link outcome="more-activity"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta3.svg"  width="70" alt="" /></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.mind.map']}; pos: right"><h:link outcome="mapa-mental"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta4.svg" width="70" height="" alt="" /></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.library']}; pos: right"><h:link outcome="biblioteca-alumno"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta5.svg" width="70" alt="" /></h:link></li>
            </ul>
        </div>
        <div class="left-nav-wrap  uk-hidden@xl ">
            <ul class="uk-thumbnav uk-thumbnav-vertical uk-flex uk-flex-center uk-flex-middle">
                <li uk-tooltip="title: #{alumno['for.all.views.dashboard']}; pos: right"><h:link outcome="dashboard"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/tierra.svg" width="50" alt=""/></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.activity']}; pos: right" class="uk-active"><h:link outcome="actividades"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta1.svg" width="50" alt=""/></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.glossary']}; pos: right"><h:link outcome="glosario"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta2.svg" width="50" alt=""/></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.practices']}; pos: right"><h:link outcome="more-activity"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta3.svg" width="50" alt=""/></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.mind.map']}; pos: right"><h:link outcome="mapa-mental"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta4.svg" width="50" alt=""/></h:link></li>
                <li uk-tooltip="title: #{alumno['for.all.views.library']}; pos: right"><h:link outcome="biblioteca-alumno"><h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/planetas/planeta5.svg" width="50" alt=""/></h:link></li>
            </ul>
        </div>
    </ui:define>
    <ui:define name="contenido">
        <link rel="stylesheet" href="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/css/alumno/transcript/transcript.css"/>
        <link rel="stylesheet" href="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/css/alumno/transcript/variables-alumno.css"/>
        <link rel="stylesheet" href="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/css/alumno/transcript/lista-ordenar.css"/>
        <link rel="stylesheet" href="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/css/alumno/transcript/ordenar-palabra.css"/>
        <link rel="stylesheet" href="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/css/alumno/transcript/transcript-drag.css"/>
        <link rel="stylesheet" href="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/css/letra.css"/>
<!--        <script src="https://www.youtube.com/iframe_api"></script>-->
        <div class="uk-section" style="box-sizing: border-box">
            <div class="uk-container padding-contenedor">
                <h:panelGroup layout="block" id="filtro-seleccion" pt:uk-filter="target: .js-filter">
                    <ul class="uk-subnav uk-subnav-pill uk-flex uk-flex-center "  >
                        <li uk-filter-control=".transcrip" uk-tooltip="#{alumno['activities.bar.icon.video']}" class="uk-active uk-animation-toggle" tabindex="0" data-respuesta="#{empty alumnoControlador.tareaActividadModelo.respuesta ? 'vacio' : 'lleno'}" data-respondiendo="#{alumnoControlador.tareaActividadModelo.resolviendoTranscript}">
                            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/morado.svg" width="70" height="70"  alt="" styleClass="uk-border-circle uk-animation-shake"/>
                        </li>
                        <li uk-filter-control=".match" uk-tooltip="#{alumno['activities.bar.icon.match']}" class="uk-animation-toggle" tabindex="0" style="display: #{empty relacionarOracionControlador.tareaRelacionarOracionModeloLista ? 'none' : 'block'}">
                            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/naranja.svg" width="70" height="70" styleClass="uk-border-circle uk-animation-shake"/>
                        </li>
                        <li uk-filter-control=".order-words" uk-tooltip="#{alumno['activities.title.order.words']}" class="uk-animation-toggle" tabindex="0" style="display: #{empty gramaticaControlador.gramaticaModeloLista ? 'none' : 'block'}">
                            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/3ojos.svg" width="70" height="70" styleClass="uk-border-circle uk-animation-shake"/>
                        </li>
                        <li uk-filter-control=".answer" uk-tooltip="#{alumno['activities.bar.icon.transcript']}" class="uk-animation-toggle" tabindex="0">
                            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/verde.svg" width="70" height="70" styleClass="uk-border-circle uk-animation-shake"/>
                        </li>
                        <h:form>
                            <h:inputHidden value="#{transcripcionControlador.activo}"/>
                            <h:commandLink style="display: none">
                                <f:ajax execute="@form" listener="#{transcripcionControlador.cambiaEstatus}" render="@none"/>
                            </h:commandLink>
                        </h:form>
                    </ul>

                    <ul class="js-filter  uk-text-center" data-visibilidad-respuestas="#{alumnoControlador.tareaActividadModelo.verRespuesta}" >
                        <li class="transcrip">
                            <div class="uk-inline uk-flex uk-flex-left uk-text-bold">
                                <a><h:graphicImage styleClass="img-ayuda" url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/icono/information.svg" pt:uk-svg=""/></a>
                                <div uk-dropdown="mode: click">#{alumno['activity.help.message.video']}</div>
                            </div>
                           <h:panelGroup layout="block" styleClass="uk-grid" pt:uk-grid="">
                               <div class="uk-width-1-2@m tam-contenido uk-padding-remove-left uk-position-relative">
                                   <div id="video1" data-video="#{alumnoControlador.tareaActividadModelo.idActividad}" class="scrollFinal"></div>
                                   <div class="barra-publicidad"></div>
                                   <span id="boton1" uk-icon="icon: youtube; ratio: 4" class="visibilidad"/>
                               </div>
                               <div id="scrollTranscript" class="uk-width-1-2@m uk-text-justify transcrip-contenedor tam-contenido scroll-alumno letra-guion borde-guion transcripcion">
                                   <h:outputText value="#{actividadAlumnoControlador.transcripcion}" escape="false"/>
                               </div>
                           </h:panelGroup>
                        </li>
                        <li class="match uk-margin-small-top ">
                            <div class="uk-inline uk-flex uk-flex-left uk-text-bold ">
                                <a><h:graphicImage styleClass="img-ayuda" url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/icono/information.svg" pt:uk-svg=""/></a>
                                <div uk-dropdown="mode: click">#{alumno['activity.help.message.match']}</div>
                            </div>
                            <h:form id="formulario-relacionar">
                                <h:panelGroup layout="block" styleClass="caja-preguntas-ordenar scroll-drag " pt:data-activo="#{empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[0].respuesta ? 'false':'true'}">
                                    <ui:remove>
                                    <div class="uk-width-1-2@m uk-position-relative">
                                        <div class="titulo-respuesta-ordenar" >#{alumno['activities.title.match.sentence.question']}</div>
                                        <ui:repeat value="#{relacionarOracionControlador.tareaRelacionarOracionModeloLista}" var="relacionarOracion">
                                            <div class="pregunta-ordenar" data-respuesta="#{relacionarOracion.relacionarOracionModelo.respuesta}">
                                                #{relacionarOracion.relacionarOracionModelo.pregunta}
                                                <h:panelGroup layout="block" styleClass="color-correcto" rendered="#{not empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[0].respuesta and alumnoControlador.tareaActividadModelo.verRespuesta eq true}" >
                                                    #{relacionarOracion.relacionarOracionModelo.respuesta}
                                                </h:panelGroup>
                                            </div>
                                        </ui:repeat>
                                        <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/who.svg" styleClass="img-titulo-1"/>
                                    </div>
                                    <div class="uk-width-1-2@m uk-position-relative">
                                        <div class="titulo-respuesta-ordenar">#{alumno['activities.title.match.sentence.answer']}</div>
                                        <ui:repeat value="#{relacionarOracionControlador.tareaRelacionarOracionModeloLista}" var="relacionarOracion" varStatus="cont">
                                            <h:panelGroup  id="cont#{cont.index}" layout="block" styleClass="respuestas-ordenar-lista " pt:uk-sortable="group: match-activity" pt:data-indice="#{cont.index}">
                                                <h:panelGroup layout="block"
                                                              rendered="#{not empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[cont.index].respuesta}"
                                                              styleClass="respuesta #{relacionarOracion.relacionarOracionModelo.id eq relacionarOracion.respuesta ? 'correcto' : 'incorrecto'}">
                                                    #{relacionarOracionControlador.respuestaVal(relacionarOracionControlador.tareaRelacionarOracionModeloLista[cont.index].respuesta)}
                                                </h:panelGroup>
                                            </h:panelGroup>
                                        </ui:repeat>
                                        <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/whom.svg" styleClass="img-titulo-2"/>
                                    </div>
                                    </ui:remove>

                                    <div class="uk-grid uk-child-width-1-2@m" uk-grid="">
                                        <div class="uk-position-relative">
                                            <div class="titulo-respuesta-ordenar" >#{alumno['activities.title.match.sentence.question']}</div>
                                            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/who.svg" styleClass="img-titulo-1"/>
                                        </div>
                                        <div class="uk-position-relative">
                                            <div class="titulo-respuesta-ordenar">#{alumno['activities.title.match.sentence.answer']}</div>
                                            <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/whom.svg" styleClass="img-titulo-2"/>
                                        </div>
                                    </div>
                                    <ui:repeat value="#{relacionarOracionControlador.tareaRelacionarOracionModeloLista}" var="relacionarOracion" varStatus="cont">
                                        <h:panelGroup layout="block" styleClass="uk-grid uk-child-width-1-2@m " style="margin-top: 30px;" pt:uk-grid="" >
                                            <div class="uk-position-relative">
                                                    <div class="pregunta-ordenar" data-respuesta="#{relacionarOracion.relacionarOracionModelo.respuesta}">
                                                        #{relacionarOracion.relacionarOracionModelo.pregunta}
                                                        <h:panelGroup layout="block" styleClass="color-correcto" rendered="#{not empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[0].respuesta and alumnoControlador.tareaActividadModelo.verRespuesta eq true}" >
                                                            #{relacionarOracion.relacionarOracionModelo.respuesta}
                                                        </h:panelGroup>
                                                    </div>
                                            </div>
                                            <div class="uk-position-relative">
                                                    <h:panelGroup  id="cont#{cont.index}" layout="block" styleClass="respuestas-ordenar-lista" pt:uk-sortable="group: match-activity" pt:data-indice="#{cont.index}">
                                                        <h:panelGroup layout="block"
                                                                      rendered="#{not empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[cont.index].respuesta}"
                                                                      styleClass="respuesta  #{relacionarOracion.relacionarOracionModelo.respuesta eq relacionarOracionControlador.respuestaVal(relacionarOracionControlador.tareaRelacionarOracionModeloLista[cont.index].respuesta) ? 'correcto' : 'incorrecto'}">
                                                            #{relacionarOracionControlador.respuestaVal(relacionarOracionControlador.tareaRelacionarOracionModeloLista[cont.index].respuesta)}
                                                        </h:panelGroup>
                                                    </h:panelGroup>
                                            </div>
                                        </h:panelGroup>
                                    </ui:repeat>
                                </h:panelGroup>
                                <h:panelGroup id="tablaRespuestas"
                                              layout="block"
                                              styleClass="respuestas-ordenar scroll-drag"
                                              pt:uk-sortable="group: match-activity"
                                               rendered="#{empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[0].respuesta}">
                                    <ui:repeat value="#{relacionarOracionControlador.desordenaLista(relacionarOracionControlador.tareaRelacionarOracionModeloLista)}" var="preRespuestas" varStatus="resp">
                                        <h:panelGroup id="resp#{resp.index}"
                                                      layout="block"
                                                      styleClass="respuesta "
                                                      pt:data-index="#{resp.index}"
                                                      pt:data-id="#{preRespuestas.relacionarOracionModelo.id}">
                                            #{preRespuestas.relacionarOracionModelo.respuesta}
                                        </h:panelGroup>
                                    </ui:repeat>
                                </h:panelGroup>
                                <h:panelGroup layout="block"  styleClass="score uk-position-absolute mov1"  rendered="#{not empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[0].respuesta}">
                                    <span/>
                                </h:panelGroup>
                                <h:inputHidden id="respuestaOraciones" value="#{relacionarOracionControlador.idRespuesta}"/>
                                <h:commandButton id="buttonEnviar" styleClass="boton-enviar boton-trasladar" onclick="return recuperaDatos(event)" value="Send" rendered="#{empty relacionarOracionControlador.tareaRelacionarOracionModeloLista[0].respuesta}">
                                    <f:ajax listener="#{relacionarOracionControlador.llenarTareaModelo()}"  execute="@form"  render="@form" onevent="function f(data) {if (data.status === 'success'){ setTimeout(calificarMatch,500);  }}"/>
                                </h:commandButton>
                            </h:form>
                        </li>
                        <li class="order-words">
                            <div class="uk-inline uk-flex uk-flex-left uk-text-bold">
                                <a><h:graphicImage styleClass="img-ayuda" url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/icono/information.svg" pt:uk-svg=""/></a>
                                <div uk-dropdown="mode: click">#{alumno['activity.help.message.words']}</div>
                            </div>
                            <h1 class="uk-text-center lescuadron" style="color: white"> #{alumno['activities.word.order.instruction.title']}</h1>
                            <div class="imagen-ordenar">
                                <h:graphicImage url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/mounstro/whom.svg"/>
                            </div>
                            <ul class="uk-subnav uk-subnav-pill uk-flex uk-flex-center menu-ordenar scroll-drag" uk-switcher="">
                                <ui:repeat value="#{gramaticaControlador.gramaticaModeloLista}" var="gramatica" varStatus="estatus">
                                    <li class="#{empty gramatica.respuesta ? 'boton-falta' : 'boton-listo'}">#{estatus.index + 1}</li>
                                </ui:repeat>
                            </ul>
                            <ul class="uk-switcher uk-margin scroll-drag" id="contenedor-words">
                                <ui:repeat value="#{gramaticaControlador.gramaticaModeloLista}" var="gramatica">
                                    <li data-activado = "#{not empty gramatica.calificacion and not empty gramatica.respuesta ? 'true': 'false'}">
                                        <h:graphicImage styleClass="movimiento2 finalizado" url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/pop-art/boton-finished.svg" rendered="#{not empty gramatica.respuesta and empty gramatica.calificacion}"/>
                                        <h:panelGroup layout="block" styleClass="score uk-margin-auto"  rendered="#{not empty gramatica.respuesta and not empty gramatica.calificacion}">
                                            <span><h:outputText  value="#{gramatica.calificacion}"/></span>
                                        </h:panelGroup>
                                        <h:outputText styleClass="visibilidad"  value="#{gramatica.palabra}" rendered="#{not empty gramatica.respuesta and not empty gramatica.calificacion}"/>
                                        <h:form>
                                            <h:panelGroup layout="block" styleClass="uk-container padding-contenedor estilo-contenedor">
                                                <h:inputHidden value="#{empty gramatica.respuesta ? gramatica.palabra : gramatica.respuesta}" pt:data-respuesta="#{empty gramatica.respuesta}"/>
                                                <h:panelGroup layout="block" styleClass="uk-child-width-1-5@m uk-grid  uk-padding-small" pt:uk-grid="" pt:uk-sortable="" rendered="#{empty gramatica.respuesta}"/>
                                                <h:panelGroup layout="block" styleClass="uk-child-width-1-5@m uk-grid  uk-padding-small" pt:uk-grid="" rendered="#{not empty gramatica.respuesta}"/>
                                            </h:panelGroup>
                                            <h:inputHidden value="#{tareaGramaticaControlador.respuesta}"/>
                                            <h:commandButton value="Send" styleClass="boton-enviar boton-trasladar" onclick="return completarPalabra(event)" rendered="#{empty gramatica.respuesta}">
                                                <f:ajax listener="#{tareaGramaticaControlador.enviarRespuesta(gramatica.codigo, gramatica.actividadModelo.idVideo, gramatica.vuelta, gramatica.palabra)}"
                                                        execute="@form" onevent="function funcion(data) { remueveOrdenador(data); siguienteEjercicio() }"/>
                                            </h:commandButton>
                                        </h:form>
                                        <h:panelGroup layout="block" styleClass="contenedor-respuesta-correcta uk-margin-small-top visibilidad" rendered="#{not empty gramatica.respuesta and not empty gramatica.calificacion}">
                                            <h3 class="color-correcto" style="font-family: 'Sniglet', 'Arial Black', sans-serif">Correct Answer</h3>
                                            <span style="font-size: 20px; color: black; ">#{gramatica.palabra}</span>
                                        </h:panelGroup>
                                    </li>

                                </ui:repeat>
                            </ul>
                        </li>
                        <li class="answer">
                            <h:form id="formulario-transcripcion">
                                <div class="uk-inline uk-flex uk-flex-left uk-text-bold">
                                    <a><h:graphicImage styleClass="img-ayuda" url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/icono/information.svg" pt:uk-svg=""/></a>
                                    <div uk-dropdown="mode: click">#{alumno['activity.help.message.fill.in.the.blanks']}</div>
                                </div>
                                <div class="video-activity uk-position-relative">
                                   <ui:remove><div data-video="#{alumnoControlador.tareaActividadModelo.idActividad}" class="scrollFinal" ></div></ui:remove>
                                    <iframe  id="video2"  width="100%" height="100%" src="https://www.youtube.com/embed/#{alumnoControlador.tareaActividadModelo.idActividad}?enablejsapi=1"
                                            frameborder="0" class="scrollFinal"></iframe>
                                    <div class="barra-publicidad"></div>
                                    <span id="boton2" uk-icon="icon: youtube; ratio: 4" class="visibilidad"/>
                                </div>
                                <h:panelGroup layout="block" styleClass="uk-child-width-1-2@m uk-grid" pt:uk-grid="">
                                    <h:panelGroup layout="block" styleClass="contenedor-padre-activity" rendered="#{empty alumnoControlador.tareaActividadModelo.respuesta}">
                                        <h:panelGroup layout="block" styleClass="uk-sortable contenedor-respuesta" pt:uk-sortable="group: respuesta"/>
                                    </h:panelGroup>
                                    <div class="trancript-contenedor arrastrar scroll-drag uk-text-justify remplazar" data-respuesta="#{empty alumnoControlador.tareaActividadModelo.respuesta}">
                                        <h:outputText value="#{actividadAlumnoControlador.transcripcion}" escape="false" rendered="#{empty alumnoControlador.tareaActividadModelo.respuesta}"/>
                                        <h:outputText value="#{alumnoControlador.tareaActividadModelo.respuesta}" escape="false" rendered="#{not empty alumnoControlador.tareaActividadModelo.respuesta}"/>
                                    </div>
                                    <ui:remove>
                                        <h:graphicImage styleClass="finalizado movimiento2" url="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/img/alumno/meteorito.svg" rendered="#{not empty alumnoControlador.tareaActividadModelo.respuesta}"/>
                                    </ui:remove>
                                    <h:panelGroup style="display: flex; justify-content: center; align-items: center"  layout="block" rendered="#{not empty alumnoControlador.tareaActividadModelo.respuesta}">
                                        <h:panelGroup layout="block" styleClass="score">
                                            <span style="font-weight: 900; font-size: 30px; color: white"/>
                                        </h:panelGroup>
                                    </h:panelGroup>

                                </h:panelGroup>
                                <h:inputHidden id="respuesta" value="#{transcripcionControlador.transcripcion}"/>
                                <h:inputHidden id="calificacion" value="#{transcripcionControlador.calificacion}"/>
                                <h:commandButton styleClass="boton-enviar boton-trasladar" style="margin-top: 20px"
                                                 value="#{boton['submit']}"
                                                 onclick="return validaContenido()"
                                                 rendered="#{empty alumnoControlador.tareaActividadModelo.respuesta}">
                                    <f:ajax listener="#{transcripcionControlador.enviaRespuestas}"
                                            execute="@form"
                                            onevent="function funcion(data) { transcripcionEnvidad(data); }"
                                            render="@form"/>
                                </h:commandButton>
                            </h:form>
                        </li>
                    </ul>
                </h:panelGroup>
            </div>
        </div>
        <script type="application/javascript">

            var videoPlayer = document.querySelectorAll('.scrollFinal');
            var objDiv = document.getElementById('scrollTranscript');
            var player = [];
            var timer_is_on = 0;
            var time;
            var boleanoRespuestas = document.querySelector('ul.js-filter').dataset.visibilidadRespuestas;
            var totalRespuestasTranscripcion = 0;
            var ordenarPalabras = document.querySelector('.order-words');
            var mensajeEnviado = "#{alumno['send.message']}";
            var mensajeNoEnviar = "#{alumno['send.message.not.send']}";
            var mensajeError = "#{alumno['send.message.error']}";
            var mensajeTrnascripcion = "#{alumno['send.message.transcript']}";
            var tag = document.createElement('script');
            var temporal;
            tag.src = "https://www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            document.querySelector('.transcrip > div:nth-child(2) > div:first-child > span').addEventListener('click',reproducir);
            document.querySelector('.answer .video-activity  span').addEventListener('click',reproducir);
            document.querySelectorAll("#filtro-seleccion ul:first-child > li").forEach(links => {
                links.addEventListener('click',pausa);
            });

            var contenedorTranscripVideo = document.querySelector("[uk-filter-control='.answer']");
            contenedorTranscripVideo.addEventListener('click',botonPlay);
            function onYouTubeIframeAPIReady() {
                videoPlayer.forEach(function (video) {
                    console.log(video.dataset.video);
                    temporal = new YT.Player( video, {
                        height: '100%',
                        width: '100%',
                        videoId: video.dataset.video,
                        events: {
                            'onReady': onPlayerReady,
                            'onStateChange': onPlayerStateChange
                        }
                    });
                    player.push(temporal);
                });
            }

            function onPlayerReady(event) {
                console.log(event, 'Evento Listo!!');
            }

            var done = false;
            function onPlayerStateChange(event) {

                switch (event.data) {
                    case 0:{
                        if(event.target.f.id === "video1"){
                            var contenedorVideo =  document.querySelector('.scrollFinal');
                            var logo = document.querySelector('.transcrip > div:nth-child(2) > div:first-child > span');
                            var barra = document.querySelector('.barra-publicidad');
                            console.log('finalizado');
                           contenedorVideo.style.display = 'none';
                           contenedorVideo.parentElement.classList.add('finalVideo');
                           logo.classList.toggle('visibilidad');
                           barra.classList.toggle('visibilidad');
                        }else if(event.target.f.id === "video2"){
                            var contenedorVideo2 =  document.querySelector('#video2');
                            var logo2 = document.querySelector('.answer .video-activity > span');
                            var barra2 = document.querySelector('.answer .barra-publicidad');
                            console.log('finalizado');
                            contenedorVideo2.style.display = 'none';
                            contenedorVideo2.parentElement.classList.add('finalVideo');
                            logo2.classList.toggle('visibilidad');
                            barra2.classList.toggle('visibilidad');
                        }
                        break;
                    }
                    case 1:{
                        // console.log("reproduciendo");
                        startCount();
                        break;
                    }
                    case 2:{
                        stopCount();
                        // console.log("pausado");
                        break;
                    }

                }
            }
            function pageScroll() {
                objDiv.scrollTop = objDiv.scrollTop + 5;
                // time = setTimeout('pageScroll()', 500); tiempo correcto para los videos
                time = setTimeout('pageScroll()', 400);
            }

            function startCount() {
                if (!timer_is_on) {
                    timer_is_on = 1;
                    pageScroll();
                }
            }

            function stopCount() {
                clearTimeout(time);
                timer_is_on = 0;
            }

            function reproducir(event) {
                switch (event.path[2].id) {
                    case "boton1":{
                        var contenedorVideo =  document.querySelector('.scrollFinal');
                        var logo = document.querySelector('.transcrip > div:nth-child(2) > div:first-child > span');
                        var barra = document.querySelector('.barra-publicidad');
                        contenedorVideo.style.display = 'block';
                        contenedorVideo.parentElement.classList.remove('finalVideo');
                        logo.classList.toggle('visibilidad');
                        barra.classList.toggle('visibilidad');
                        player[0].playVideo();

                        break;
                    }
                    case "boton2":{
                        var contenedorVideo2 =  document.querySelector('#video2');
                        var logo2 = document.querySelector('.answer .video-activity  span');
                        var barra2 = document.querySelector('.answer .barra-publicidad');
                        contenedorVideo2.style.display = 'block';
                        contenedorVideo2.parentElement.classList.remove('finalVideo');
                        logo2.classList.toggle('visibilidad');
                        barra2.classList.toggle('visibilidad');
                        player[1].playVideo();
                    }

                }

            }

            function  botonPlay() {
                let boton = document.querySelector('.video-activity');
                var video = boton.querySelector('#video-drag');

                console.log(video.src);
            }
            function pausa() {
                player[0].pauseVideo();
                player[1].pauseVideo();
            }
        </script>
        <script type="text/javascript">
            document.querySelectorAll('.estilo-contenedor input[type=hidden]').forEach(function (palabra) {
                subPalabra = palabra.value.split(" ");
                if (palabra.dataset.respuesta === 'true') {
                    subPalabra = revolver(subPalabra);
                }
                subPalabra.forEach(function (value1) {
                    if (value1.trim() !== '') {
                        padre = document.createElement('div');
                        hijo = document.createElement('div');
                        hijo.classList.add('palabra','uk-text-center');
                        hijo.appendChild(document.createTextNode(value1.replace('.','')));
                        padre.appendChild(hijo);
                        palabra.nextElementSibling.appendChild(padre);
                    }
                });
            });

            function revolver(arreglo) {
                var indiceActual = arreglo.length, temporal, indiceAleatorio;
                while (0 !== indiceActual) {
                    indiceAleatorio = Math.floor(Math.random() * indiceActual);
                    indiceActual -= 1;
                    temporal = arreglo[indiceActual];
                    arreglo[indiceActual] = arreglo[indiceAleatorio];
                    arreglo[indiceAleatorio] = temporal;
                }
                return arreglo;
            }
            
            function completarPalabra(evento) {
                var texto = evento.target.previousElementSibling.previousElementSibling.querySelectorAll('div > div > .palabra');
                var respuesta = '';
                texto.forEach(function (value) {
                    respuesta = respuesta.concat(value.textContent).concat(' ');
                });
                evento.target.previousElementSibling.value = respuesta.trim();
            }

            function remueveOrdenador(data) {
                if (data.status === 'success') {
                    data.source.previousElementSibling.previousElementSibling.querySelector('.uk-sortable').removeAttribute('uk-sortable');
                    data.source.disabled = true;
                    UIkit.notification(mensajeEnviado, {pos: 'top-right'});
                    var cambio = ordenarPalabras.querySelector('ul li.uk-active');
                    cambio.classList.remove('boton-falta');
                    cambio.classList.add('boton-listo');
                    var div = document.createElement('div');
                    div.classList.add('realizado', 'movimiento');
                    data.source.parentElement.parentElement.appendChild(div);
                }
            }

            function recuperaDatos(evento) {
                if (document.getElementById('formulario-relacionar:tablaRespuestas').childElementCount > 0 )  {
                    UIkit.modal.alert(mensajeNoEnviar);
                    return false;
                } else {
                    var idRelacionarmodelos = document.querySelectorAll('.match form .respuestas-ordenar-lista');
                    var getId = [];
                    idRelacionarmodelos.forEach(function (input) {
                        getId.push(input.querySelector('div').dataset.id);
                    });
                    document.getElementById('formulario-relacionar:respuestaOraciones').value = getId.join();
                    document.querySelector('input[type=submit]').disabled = true;
                    return true;
                }
            }

            function siguienteEjercicio() {
                let ordenarPalabra = document.querySelectorAll('.order-words .uk-subnav li.boton-falta');
                if (ordenarPalabra.length !== 0) {
                    setTimeout(() => ordenarPalabra[0].click() , 1000);
                }
            }

            document.addEventListener('DOMContentLoaded', estaResuelto);

            function estaResuelto() {
                if (document.querySelector('.match').getAttribute('value') === 'true'){
                    var boton = document.getElementById('formulario-relacionar:buttonEnviar');
                    var tabla = document.getElementById('formulario-relacionar:tablaRespuestas');
                    boton.style.display = 'none';
                    tabla.style.display = 'none';
                }
            }
        </script>


        <script type="application/javascript" src="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/js/alumno/transcripcion.js"></script>
    </ui:define>
    <ui:define name="enlaces-js">
        <script type="application/javascript" src="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/js/alumno/drag-prueba.js"></script>
        <script type="application/javascript" src="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/js/alumno/match-activity.js"></script>
        <script type="application/javascript" src="https://tecolotl-multimedia.nyc3.digitaloceanspaces.com/Tecolotl/resources/js/alumno/calificaciones-actividad.js"/>
    </ui:define>
</ui:composition>

</html>