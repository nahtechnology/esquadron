<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<ui:composition template="/template/profesor/dashboard-profesor.xhtml">
    <f:metadata>
        <f:viewParam name="idTarea" value="#{calificaMapaMentalControlador.idTarea}" required="true"/>
        <f:viewParam name="cardinalidad" value="#{calificaMapaMentalControlador.cardinalidad}" required="true"/>
        <f:viewParam name="intento" value="#{calificaMapaMentalControlador.intento}" required="true"/>
        <f:viewAction action="#{calificaMapaMentalControlador.busca}"/>
    </f:metadata>
    <ui:define name="menu">
    </ui:define>
    <ui:define name="contenido">
        <h:outputStylesheet library="css" name="/profesor/calificacion.css"/>
        <h:panelGroup layout="block" class="mapa-mental">
            <h2 class="uk-text-center">Calificacion Mapa Mental</h2>
            <h:form styleClass="uk-form-controls uk-grid" pt:uk-grid="" >
                <h:panelGroup layout="block" styleClass="uk-width-3-4@m uk-grid uk-child-width-1-2@m" pt:uk-grid="">
                    <ui:repeat value="#{calificaMapaMentalControlador.tareaMapaMentalModeloLista}" var="tareaMapaMental">
                        <div>Pregunta:<br/><span>#{tareaMapaMental.pregunta}</span></div>
                        <div>Respuesta:<br/><span>#{tareaMapaMental.respuesta}</span></div>
                    </ui:repeat>
                    <h:inputHidden value="#{calificaMapaMentalControlador.calificaTareaMapaMentalModelo.idTarea}"/>
                    <h:inputHidden value="#{calificaMapaMentalControlador.calificaTareaMapaMentalModelo.vuelta}"/>
                    <h:inputHidden value="#{calificaMapaMentalControlador.calificaTareaMapaMentalModelo.cardinalidad}"/>
                    <div>
                        <h:inputTextarea value="#{calificaMapaMentalControlador.calificaTareaMapaMentalModelo.comentario}" styleClass="uk-textarea comentario">
                            <f:validateRequired/>
                        </h:inputTextarea>
                    </div>
                    <div>
                        <h:inputText pt:type="range" pt:min="25" pt:max="100" pt:step="25" styleClass="rango" value="#{calificaMapaMentalControlador.calificaTareaMapaMentalModelo.puntaje}">
                            <f:validateRequired/>
                        </h:inputText>
                        <p><span /><span style="color: red; font-weight: bold"/></p>
                    </div>
                </h:panelGroup>
                <div class="uk-width-1-4@m">
                    <div class="bmap-#{calificaMapaMentalControlador.tareaMapaMentalModeloLista[0].cardinalidad}">

                    </div>
                    <p>Score: <span style="color: red; font-weight: bold"/></p>
                </div>
                <h:commandButton value="Calificar" styleClass="boton-escuadron-base" action="#{calificaMapaMentalControlador.califica}"/>
            </h:form>
        </h:panelGroup>
        <script type="application/javascript">
            var slider = document.querySelectorAll('.mapa-mental input[type=range]');
            var output = document.querySelectorAll('.mapa-mental input[type=range] + p  span:first-child');
            var rubrica = document.querySelectorAll('.mapa-mental input[type=range] + p > span:first-child + span');
            var score = document.querySelectorAll('.mapa-mental form [class^=bmap-] + p > span');
            var datos = [], texto = [];

            // rubrica.style.color="red";
            // score.style.color="red";
            output.forEach(function (value,index) {
                // value.innerHTML = slider[index].value;
            });
            rubrica.forEach(function (value,index) {

                switch (slider[index].value) {
                    case "25":
                        rubrica[index].innerHTML = "Deficiente";
                        score[index].innerHTML = "25";
                        break;
                    case "50":
                        rubrica[index].innerHTML = "Regular";
                        score[index].innerHTML = "50";
                        break;
                    case "75":
                        rubrica[index].innerHTML = "Bueno";
                        score[index].innerHTML = "75";
                        break;
                    case "100":
                        rubrica[index].innerHTML = "Excelente";
                        score[index].innerHTML = "100";
                        break;
                    default:
                        console.error("Seleccion aun no programada");
                }

            });

            slider.forEach(function (value,index){
                datos[index] = value.value;
                value.oninput = function() {

                    switch (this.value) {
                        case "25":
                            rubrica[index].innerHTML = "Deficiente";
                            score[index].innerHTML = "25";
                            break;
                        case "50":
                            rubrica[index].innerHTML = "Regular";
                            score[index].innerHTML = "50";
                            break;
                        case "75":
                            rubrica[index].innerHTML = "Bueno";
                            score[index].innerHTML = "75";
                            break;
                        case "100":
                            rubrica[index].innerHTML = "Excelente";
                            score[index].innerHTML = "100";
                            break;
                    }
                };

            });
        </script>

        <script type="application/javascript">
            var oracion = document.querySelectorAll('.gramatica > div > :nth-child(2n)');
            var respuestaOracion = document.querySelectorAll('.gramatica > div > :nth-child(2n) + div');
        </script>
    </ui:define>
</ui:composition>
</html>
