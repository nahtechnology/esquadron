<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pa="http://xmlns.jcp.org/jsf/composite/paginacion">

<ui:composition template="/template/profesor/dashboard-profesor.xhtml">
    <ui:define name="menu">
        <ul class="uk-subnav nav-sub uk-visible@m " uk-margin="">
            <li class="nav-sub-active"><h:link outcome="dashboard-maestro" value="Home"/></li>
            <li class="uk-text-uppercase"><h:link outcome="biblioteca-profesor2" styleClass="letra-color-subnav" value="Library"/> </li>
            <li class="uk-text-uppercase"><a href="#" class="letra-color-subnav">Edit profile</a></li>
        </ul>
        <div class="uk-navbar-left uk-hidden@m">
            <a class="uk-navbar-toggle" uk-navbar-toggle-icon="" href="" uk-toggle="target: #menu" type="button"/>
        </div>
        <div id="menu" uk-offcanvas="overlay: true">
            <div class="uk-offcanvas-bar  ">

                <button class="uk-offcanvas-close" type="button" uk-close=""/>

                <ul class="uk-nav  nav-sub-offcanvas ">
                    <li class="nav-sub-active"><h:link outcome="dashboard-maestro" value="Home"/></li>
                    <li class="uk-text-uppercase"><h:link outcome="biblioteca-profesor2" styleClass="letra-color-subnav" value="Library"/> </li>
                    <li class="uk-text-uppercase"><a href="#" class="letra-color-subnav">Edit profile</a></li>
                </ul>

            </div>
        </div>
    </ui:define>
    <ui:define name="contenido">
        <h:outputStylesheet library="css" name="graficas.css"/>
        <div class="uk-margin-large-top"><h1 class="uk-margin-top uk-text-uppercase lescuadron ">Welcome!</h1></div>
        <div class="uk-grid" uk-grid="">
            <div class="uk-width-1-3@m">
                <div class="uk-card uk-card-default uk-card-small color-card-four margen-one">
                    <div class="uk-card-header border-card">
                        <div class="uk-grid-small uk-flex-middle" uk-grid="">
                            <div class="uk-width-auto">
                                <h:graphicImage styleClass="uk-border-circle" library="img" name="monstruo.svg" width="50" height="50"/>
                            </div>
                            <div class="uk-width-expand">
                                <h3 class="uk-card-title uk-margin-remove-bottom uk-text-small uk-text-uppercase uk-text-bold">maugg</h3>
                                <p class="uk-text-meta uk-margin-remove-top uk-text-small"><span>el mau</span></p>
                            </div>
                            <div class="uk-width-1-1@s">
                                <p class="uk-text-meta uk-margin-remove-bottom uk-margin-remove-top uk-text-small uk-margin-small-bottom "><span class="uk-text-bold">Nickname</span>#{dashboardProfesorControlador.apodo}</p>
                                <p class="uk-text-meta uk-margin-remove-bottom uk-margin-remove-top uk-text-small uk-margin-small-bottom "><span class="uk-text-bold">Email:</span>#{dashboardProfesorControlador.correo}</p>
                                <p class="uk-text-meta uk-margin-remove-bottom uk-margin-remove-top uk-text-small uk-margin-small-bottom"><span class="uk-text-bold">State:</span>Puebla</p>
                                <p class="uk-text-meta uk-margin-remove-bottom uk-margin-remove-top uk-text-small "><span class="uk-text-bold uk-text-primary">Edit Profile</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="uk-card-body padding-card-body">
                        <h3 class="uk-text-uppercase uk-text-bold ">question?</h3>
                        <p>We've got answers! <span class="uk-text-primary">Contact Us</span></p>
                    </div>
                    <div class="uk-card-footer">
                        <h3 class="uk-text-uppercase uk-text-bold">Teacher Training</h3>
                        <p>Learn more with our free <span class="uk-text-primary">e-squadron courses!</span></p>
                    </div>
                </div>
            </div>
            <div class="uk-width-2-3@m">
                <div class="uk-section uk-section-default uk-padding-remove-top uk-padding-remove-bottom ">
                    <div class="uk-container">
                        <div class="uk-grid uk-child-width-1-4@m" uk-grid="">
                            <div class="">
                                <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-cards color-title-card uk-text-center">Grupos</h5>
                                <!--<h1 class="color-texto uk-text-center size-one uk-margin-remove-top uk-margin-remove-bottom">8</h1>-->
                                   <div class="uk-flex uk-flex-center">
                                        <div class="tamaño-imagen"  uk-tooltip="title: #{dashboardProfesorControlador.numero} Grupos; pos: right">
                                                <h:graphicImage styleClass="uk-border-circle imagen-card-section uk-svg " library="img" name="maestra.svg"   pt:uk-svg=""/>
                                        </div>
                                   </div>
                            </div>
                            <div>
                                <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-cards color-title-card uk-text-center">Nro. Alumnos</h5>
                                <!--<h1 class="color-texto uk-text-center size-one uk-margin-remove-top uk-margin-remove-bottom">180</h1>-->
                                <div class="uk-flex uk-flex-center">
                                    <div class="tamaño-imagen"  uk-tooltip="title:#{dashboardProfesorControlador.numero} Alumnos; pos: right">
                                        <h:graphicImage styleClass="uk-border-circle imagen-card-section uk-svg " library="img" name="maestra.svg"   pt:uk-svg=""/>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-cards color-title-card uk-text-center">Horas de Conexión</h5>
                                <!--<h1 class="color-texto uk-text-center size-one uk-margin-remove-top uk-margin-remove-bottom">30<small class="uk-text-small">HR</small></h1>-->
                                <div class="uk-flex uk-flex-center">
                                    <div class="tamaño-imagen"  uk-tooltip="title: #{dashboardProfesorControlador.numero} Horas; pos: right">
                                        <h:graphicImage styleClass="uk-border-circle imagen-card-section uk-svg " library="img" name="administrador.svg"   pt:uk-svg=""/>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-cards color-title-card uk-text-center">Ejecicios revisión</h5>
                                <!--<h1 class="color-texto uk-text-center size-one uk-margin-remove-top uk-margin-remove-bottom">38</h1>-->
                                <div class="uk-flex uk-flex-center">
                                    <div class="tamaño-imagen"  uk-tooltip="title: #{dashboardProfesorControlador.numero} Pendientes; pos: left">
                                        <h:graphicImage styleClass="uk-border-circle imagen-card-section uk-svg " library="img" name="coordinador.svg"   pt:uk-svg=""/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="uk-section uk-section-default uk-padding-remove-top uk-margin-small-top ">
                    <div class="uk-container">
                        <h:panelGroup styleClass="uk-grid uk-child-width-1-1@m" pt:uk-grid="">
                            <div>
                                <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-cards uk-text-center">Rendimiento Grupal</h5>
                               <div  class="chart-container">
                                   <canvas class="mi-tabla">

                                   </canvas>
                               </div>

                            </div>
                        </h:panelGroup>
                    </div>
                </div>
            </div>

        </div>
        <div class="uk-container  uk-flex uk-flex-left uk-margin-small-bottom uk-visible@m" >
            <div> <h:graphicImage styleClass="uk-border-circle" library="img" name="3ojos.svg" width="70" height="70"/></div>
            <div class="uk-margin-small-left esquadron-paddin"><h3 class="letra-cards lescuadron ">Premia el esfuerzo de tus alumnos</h3></div>
        </div>

        <div class="uk-container uk-container-small uk-grid uk-child-width-1-1@s uk-hidden@m" >
            <div class="contenedor-imagen-alumnos uk-flex uk-flex-center"> <h:graphicImage styleClass="uk-border-circle" library="img" name="3ojos.svg" width="70" height="70"/></div>
            <div class="uk-text-center"><h3 class="letra-cards lescuadron ">Premia el ezfuerzo de tus alumnos</h3></div>
        </div>

        <h:panelGroup layout="block" styleClass="uk-grid uk-child-width-1-2@m uk-section uk-section-default uk-padding-remove-top uk-padding-remove-bottom" pt:uk-grid="" >
                <ui:repeat value="#{dahsboardProfesorControldor.graficaModelos}" var="grafica">
                <div>
                    <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-section">Rendimiento del Grupo</h5>
                        <div class="chart-container-min color-contenido-grafica">
                            <canvas class="mi-char">
                                <div>#{grafica.grupo}</div>
                                <div>#{grafica.grado}</div>
                                <div>#{grafica.color}</div>
                                <div>#{grafica.dato1}</div>
                                <div>#{grafica.dato2}</div>
                                <div>#{grafica.dato3}</div>
                                <div>#{grafica.dato4}</div>
                                <div>#{grafica.dato5}</div>
                            </canvas>
                        </div>
                </div>
                </ui:repeat>
        </h:panelGroup>

        <div class="uk-container uk-container-small uk-margin-medium-top uk-margin-large-bottom">

            <h5 class="uk-text-capitalize uk-text-bold uk-margin-remove-bottom titulo-section">Grupos de Jose</h5>
            <h:form id="formulario-detalle-profesor" styleClass="uk-form-stacked">

                <div class="uk-overflow-auto uk-margin-small-top">
                    <h:dataTable
                            value="#{detalleProfesorControlador.collectionDataModel}"
                            binding="#{detalleProfesorControlador.htmlDataTable}"
                            id="tabla-detalle-profesor"
                            var="profesor"
                            first="0"
                            rows="5"
                            styleClass="uk-table uk-table-justify uk-table-small uk-table-middle tablaPrimaria uk-table-hover uk-text-center tabla-profesor-dropdown"
                            headerClass="thPrimario uk-text-center"
                            columnClasses="uk-width-small,uk-width-small,uk-width-small"
                            rowClasses="tdPrimario"
                            footerClass="thPrimario uk-text-left">
                        <h:column>
                            <f:facet name="header"><span class="letra-tabla uk-text-bold">#{coordinacion['detalleprofesor.table.schoolgrade']}</span></f:facet>
                            #{profesor.grado}
                        </h:column>
                        <h:column>
                            <f:facet name="header"><span class="letra-tabla uk-text-bold">Grupo</span></f:facet>
                            #{profesor.grupo}
                        </h:column>

                        <h:column>
                            <f:facet name="header"><span class="letra-tabla uk-text-bold">Opciones</span></f:facet>
                            <div class="uk-inline  ">
                                <button class="uk-icon-button puntero" uk-icon="more-vertical" type="button"/>
                                <div uk-dropdown="boundary:.tabla-profesor-dropdown; mode: click" id="dropear" >
                                    <ul class="uk-nav uk-dropdown-nav uk-text-left">
                                        <li>
                                            <h:link outcome="admin-alumnos" styleClass="uk-text-primary" >
                                                <h:outputText pt:uk-icon="icon: file-edit" styleClass="uk-margin-small-right uk-icon" />
                                                <span class="uk-text-middle"><h:outputText value="Detalle"/></span>
                                            </h:link>
                                        </li>
                                        <li>

                                            <h:link outcome="biblioteca-profesor2" styleClass="uk-text-primary" >
                                                <h:outputText pt:uk-icon="icon: cog" styleClass="uk-margin-small-right uk-icon" />
                                                <span class="uk-text-middle"><h:outputText value="Asignar Tarea"/></span>
                                            </h:link>
                                        </li>
                                        <li>
                                            <h:commandLink  pt:uk-toggle="target: #modal-reporte" styleClass="uk-text-primary" >
                                                <h:outputText pt:uk-icon="icon: file-text" styleClass="uk-margin-small-right uk-icon" />
                                                <span class="uk-text-middle"><h:outputText value="Reporte"/></span>
                                                <f:ajax/>
                                            </h:commandLink>
                                        </li>
                                        <!--<li>-->
                                            <!--<h:commandLink  pt:uk-toggle="target: #modal-bloqueo" styleClass="uk-text-primary" >-->
                                                <!--<h:outputText pt:uk-icon="icon: ban" styleClass="uk-margin-small-right uk-icon" />-->
                                                <!--<span class="uk-text-middle"><h:outputText value="Bloqueo"/></span>-->
                                                <!--<f:ajax/>-->
                                            <!--</h:commandLink>-->
                                        <!--</li>-->
                                    </ul>
                                </div>
                            </div>
                        </h:column>
                        <f:facet name="footer">
                            <pa:pie-tabla htmlDataTable="#{detalleProfesorControlador.htmlDataTable}"/>
                        </f:facet>
                    </h:dataTable>
                </div>
            </h:form>


        </div>


    <!-- modal reporte-->
        <h:panelGroup layout="block" id="modal-reporte" pt:uk-modal="">
            <div class="uk-modal-dialog uk-margin-auto-vertical">
                <div class="uk-modal-header header-color-card">
                    <h2 class="uk-modal-title titulo-modal">Reporte</h2>
                </div>
                <div class="barra-modal"></div>
                <h:form styleClass="uk-form-stacked">
                    <div class="uk-modal-body">



                        <h:outputLabel for="select-descarga" styleClass="  uk-form-label" value="Selecciona Descarga"/>

                        <h:selectOneRadio id="select-descarga" StyleClass="uk-checkbox" type="checkbox"  >
                            <f:selectItem styleClass="checked" itemValue = "1" itemLabel = "Reporte Cualitativo" />
                            <f:selectItem itemValue = "2" itemLabel = "Reporte Cuantitativo" />
                        </h:selectOneRadio>





                        <ui:fragment rendered="#{facesContext.validationFailed}">
                            <h:panelGroup layout="block" styleClass="uk-alert-danger"  pt:uk-alert="">
                                <h:messages styleClass="uk-list"/>
                            </h:panelGroup>
                        </ui:fragment>


                    </div>
                    <div class="uk-modal-footer uk-text-right">
                        <button class="boton-escuadron-base-secundary uk-modal-close" type="button">Cancel</button>
                        <h:commandButton styleClass="boton-escuadron-base  uk-margin-small-left" value="Descargar" >
                            <f:ajax onevent="function cerrar(data) { cierraModal(data,'modalDescarga') }" render="@form" execute="@form"/>
                        </h:commandButton>
                    </div>
                </h:form>

            </div>

        </h:panelGroup>

    <h:outputScript library="js" name="Chart.js"/>
        <script type="text/javascript">
            var i;

            let grafica = document.querySelectorAll('.mi-char');
            let grafica2 = document.querySelectorAll('.mi-tabla');

            document.addEventListener("DOMContentLoaded", function (evt) {
                limpiaSelect("undefined");
                // modalAgregar = document.querySelector('#modal-contacto');


            });
            document.addEventListener('DOMContentLoaded', function (evt) {
                limpiaSelect();
            });

            function limpiaSelect(data) {
                if (typeof data === 'undefined') {
                    document.querySelectorAll('.uk-select').forEach(
                        function (value) { value.removeAttribute('size'); }
                    )
                } else {
                    if (data.status === 'success') {
                        document.querySelectorAll('.uk-select').forEach(
                            function (value) { value.removeAttribute('size'); }
                        )
                    }
                }
            }

            for (i = 0; i &lt; grafica.length; i++) {

                // datos[0].innerHTML

                let datos = grafica[i].querySelectorAll('div');

                // new Chart(grafica[i], {
                //     type: 'radar',
                //     data: {
                //         labels: ["Listening","Reading" , "Speaking", "Writing", "Mental Map"],
                //         datasets: [{
                //             label: datos[1].innerHTML+datos[0].innerHTML,
                //             fill: true,
                //             backgroundColor: datos[2].innerHTML,
                //             borderColor: "rgba(51,153,255,0.2)",
                //             pointBorderColor: "#fff",
                //             pointBackgroundColor: "rgba(179,181,198,1)",
                //             data: [parseFloat(datos[3].innerHTML), parseFloat(datos[4].innerHTML), parseFloat(datos[5].innerHTML), parseFloat(datos[6].innerHTML), parseFloat(datos[7].innerHTML)]
                //         }]
                //     },
                //     options: {
                //         maintainAspectRatio: false,
                //         responsiveAnimationDuration: 500,
                //         animation: {
                //             duration: 2000
                //         },
                //         title: {
                //             display: true,
                //             text: 'Amelia juarez garcia'
                //         }
                //     }
                // });

                new Chart(grafica[i], {
                    type: 'horizontalBar',
                    data: {
                        labels: ["Learning", "Speaking", "Mental Map", "Transcript", "Quiz"],
                        datasets: [{
                            label: "Population (millions)",
                            backgroundColor: ["#39f", "#895df6", "#3cba9f", "#e8c3b9", "#c45850"],
                            data: [9, 7, 5.7, 8, 7]
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsiveAnimationDuration: 500,
                        legend: {
                            display: false
                        },
                        animation: {
                            duration: 2000
                        },
                        title: {
                            display: true,
                            text: 'Predicted activity in 2020'
                        }
                    }
                });
            }


            // let datos2 = grafica2.querySelectorAll('div');
            new Chart(grafica2, {
                type: 'bar',
                data: {
                    labels: ["Grupo A", "Grupo B", "Grupo C", "Grupo D", "Grupo E"],
                    datasets: [{
                        label: "jookoo",
                        backgroundColor: ["#7d3c98", "#2471a3", "#2e86c1", "#17a589", "#d68910"],
                        data: [578, 267, 600, 900, 700]
                    }]
                },

                options: {
                    maintainAspectRatio: false,
                    responsiveAnimationDuration: 500,
                    legend: {
                        display: false
                    },
                    animation: {
                        duration: 2000
                    },
                    title: {
                        display: true,
                        text: 'Calficacion general del grupo'
                    }
                }
            });


        </script>
        <script type="text/javascript">

            var modalEditar;
            var modalDescarga;
            var modalAgregarAlumno;
            var modalEliminar;
            document.addEventListener("DOMContentLoaded", function (evt) {
                modalEditar = document.querySelector('#modal-editar-alumno');
                modalDescarga = document.querySelector('#modal-reporte');
                modalAgregaralumno = document.querySelector('#modal-nuevo-alumno');
                modalEliminar = document.querySelector('#modal-eliminar');

                UIkit.util.on('#modal-editar-alumno', 'show', function () {
                    modalEditar.querySelector('.uk-modal-body').click();
                });
                UIkit.util.on('#modal-reporte', 'show', function () {
                    modalDescarga.querySelector('.uk-modal-body').click();
                });
                UIkit.util.on('#modal-nuevo-alumno', 'show', function () {
                    modalAgregarAlumno.querySelector('.uk-modal-body').click();
                });
                UIkit.util.on('#modal-eliminar', 'show', function () {
                    modalEliminar.querySelector('.uk-modal-body').click();
                });

            });


            function cierraModal(data,modal) {
                if (data.status === "success"){
                    switch (modal) {
                        case "modalEliminar":
                            if (modalEliminar.querySelector('.uk-alert-danger') === null) {
                                UIkit.modal(modalEliminar).hide();
                            }
                            break;
                        case "modalEditar":
                            if (modalEditar.querySelector('.uk-alert-danger') === null) {
                                UIkit.modal(modalEditar).hide();
                            }
                            break;
                        case "modalDescarga":
                            if (modalDescarga.querySelector('.uk-alert-danger') === null) {
                                UIkit.modal(modalDescarga).hide();
                            }
                            break;case "modalAgregarAlumno":
                            if (modalAgregarAlumno.querySelector('.uk-alert-danger') === null) {
                                UIkit.modal(modalAgregarAlumno).hide();
                            }
                            break;

                        default: console.error(modal);

                    }
                }


            }

        </script>
    </ui:define>

</ui:composition>



</html>
